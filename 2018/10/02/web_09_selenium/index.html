<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
<title>Web crawling - Selenium Basic - 우와팬더의 블로그</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="데이터사이언스를 공부합니다">



<meta name="keywords" content="data science">



    <meta name="description" content="다룰 내용 Selenium이란 Selenium 설치 Selenium 기본 사용법 Selenium 파일 업로드">
<meta name="keywords" content="programming,web,crawling,web_crawling,웹크롤링,selenium">
<meta property="og:type" content="article">
<meta property="og:title" content="Web crawling - Selenium Basic">
<meta property="og:url" content="https://hyeshinoh.github.io/2018/10/02/web_09_selenium/index.html">
<meta property="og:site_name" content="우와팬더의 블로그">
<meta property="og:description" content="다룰 내용 Selenium이란 Selenium 설치 Selenium 기본 사용법 Selenium 파일 업로드">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-07-16T14:12:38.379Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Web crawling - Selenium Basic">
<meta name="twitter:description" content="다룰 내용 Selenium이란 Selenium 설치 Selenium 기본 사용법 Selenium 파일 업로드">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-126954393-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-126954393-1');
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


    


</head>
<body>
    
<!-- hexo-inject:begin --><!-- hexo-inject:end --><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories/">Categories</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#다룰-내용">1.1.1&nbsp;&nbsp;다룰 내용</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#1-Selenium이란">2&nbsp;&nbsp;<b>1. Selenium이란</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#2-Selenium-설치">3&nbsp;&nbsp;<b>2. Selenium 설치</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#2-1-Install-chrome-driver">3.1&nbsp;&nbsp;2.1 Install chrome driver</a>
                    
                    
                    
                    <a class="navbar-item" href="#2-2-Install-selenium">3.2&nbsp;&nbsp;2.2 Install selenium</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#3-Selenium-기본-사용법">4&nbsp;&nbsp;<b>3. Selenium 기본 사용법</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#3-1-브라우저-open">4.1&nbsp;&nbsp;3.1 브라우저 open</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-2-페이지-이동">4.2&nbsp;&nbsp;3.2 페이지 이동</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-3-window-size-조절">4.3&nbsp;&nbsp;3.3 window size 조절</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-4-브라우저-스크롤-조절">4.4&nbsp;&nbsp;3.4 브라우저 스크롤 조절</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-5-윈도우-객체-저장">4.5&nbsp;&nbsp;3.5 윈도우 객체 저장</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-6-새로운-윈도우-탭-열기">4.6&nbsp;&nbsp;3.6 새로운 윈도우 탭 열기</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-7-현재-열려있는-윈도우-객체-확인">4.7&nbsp;&nbsp;3.7 현재 열려있는 윈도우 객체 확인</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-8-윈도우-포커스-변경">4.8&nbsp;&nbsp;3.8 윈도우 포커스 변경</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-9-페이지-새로고침">4.9&nbsp;&nbsp;3.9 페이지 새로고침</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-10-alert-messege-처리">4.10&nbsp;&nbsp;3.10 alert messege 처리</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-11-confirm-처리">4.11&nbsp;&nbsp;3.11 confirm 처리</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-12-input창에-문자열-입력하기">4.12&nbsp;&nbsp;3.12 input창에 문자열 입력하기</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-13-버튼-클릭하기-click-event-발생">4.13&nbsp;&nbsp;3.13 버튼 클릭하기 (click event 발생)</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-14-끝내기">4.14&nbsp;&nbsp;3.14 끝내기</a>
                    
                    
                    
                    <a class="navbar-item" href="#창-닫기-하나의-윈도우-창을-닫음">4.14.1&nbsp;&nbsp;창 닫기 - 하나의 윈도우 창을 닫음</a>
                    
                    
                    
                    <a class="navbar-item" href="#브라우저-닫기">4.14.2&nbsp;&nbsp;브라우저 닫기</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#4-Selenium-파일-업로드">5&nbsp;&nbsp;<b>4. Selenium 파일 업로드</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#4-1-webdriver-실행하고-google-vision-api로-이동">5.1&nbsp;&nbsp;4.1 webdriver 실행하고 google vision api로 이동</a>
                    
                    
                    
                    <a class="navbar-item" href="#4-2-iframe으로-포커스-이동">5.2&nbsp;&nbsp;4.2 iframe으로 포커스 이동</a>
                    
                    
                    
                    <a class="navbar-item" href="#4-3-파일-업로드">5.3&nbsp;&nbsp;4.3 파일 업로드</a>
                    
                    
                    
                    <a class="navbar-item" href="#4-4-분석-결과-확인">5.4&nbsp;&nbsp;4.4 분석 결과 확인</a>
                    
                    
                    
                    <a class="navbar-item" href="#1-Web-결과-가져오기">5.4.1&nbsp;&nbsp;(1) Web 결과 가져오기</a>
                    
                    
                    
                    <a class="navbar-item" href="#2-Document-결과-사진-속-text-가져오기">5.4.2&nbsp;&nbsp;(2) Document 결과 (사진 속 text) 가져오기</a>
                    
                    
                    
                    <a class="navbar-item" href="#참고자료">5.4.3&nbsp;&nbsp;참고자료</a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" title="GitHub" href="https://github.com/hyeshinoh">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Web crawling - Selenium Basic
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2018-10-02T14:52:26.000Z" itemprop="datePublished">Oct 2 2018</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/2-Data-Science-공부/">2. Data Science 공부</a><span>></span><a class="article-category-link" href="/categories/2-Data-Science-공부/6-웹-Web/">6) 웹 Web</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            9 minutes read (About 1384 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h4 id="다룰-내용"><a href="#다룰-내용" class="headerlink" title="다룰 내용"></a>다룰 내용</h4><ol>
<li>Selenium이란</li>
<li>Selenium 설치</li>
<li>Selenium 기본 사용법</li>
<li>Selenium 파일 업로드</li>
</ol>
<a id="more"></a> 
<h2 id="1-Selenium이란"><a href="#1-Selenium이란" class="headerlink" title="1. Selenium이란"></a>1. Selenium이란</h2><ul>
<li>Selenium documentation (<a href="http://www.seleniumhq.org/" target="_blank" rel="noopener">http://www.seleniumhq.org/</a>) </li>
<li>웹 서비스를 테스트 하기 위해 만들어진 브라우저 자동화 라이브러리 (다른 목적으로도 사용할 수 있음)</li>
<li>동적인 웹페이지 크롤링에 이용</li>
<li>여러가지 브라우저를 지원하지만 Firefox는 최신 버전 지원 X하는 등 문제가 있을 수도 <ul>
<li>우리는 가장 많이 사용하는 Chrome driver 사용</li>
</ul>
</li>
<li>여러가지 OS, 다른 언어에서도 사용 가능</li>
</ul>
<h2 id="2-Selenium-설치"><a href="#2-Selenium-설치" class="headerlink" title="2. Selenium 설치"></a>2. Selenium 설치</h2><h3 id="2-1-Install-chrome-driver"><a href="#2-1-Install-chrome-driver" class="headerlink" title="2.1 Install chrome driver"></a>2.1 Install chrome driver</h3><ul>
<li><a href="https://sites.google.com/a/chromium.org/chromedriver/home" target="_blank" rel="noopener">다운로드 링크</a> ← 여기에서 다운로드</li>
<li>Mac: chrome driver를 글로벌하게 사용하기 위해 경로 변경 <ul>
<li><code>$ mv ~/Donwloads/chromedriver /usr/local/bin</code></li>
</ul>
</li>
<li>Windows: 환경변수 추가</li>
<li>환경변수 설정이 잘 되지 않을 때는 같은 폴더에 chromedriver.exe를 넣거나 코드에 path를 넣어주면 됨</li>
</ul>
<h3 id="2-2-Install-selenium"><a href="#2-2-Install-selenium" class="headerlink" title="2.2 Install selenium"></a>2.2 Install selenium</h3><ul>
<li>Mac: <code>$ sudo pip3 install selenium</code></li>
<li>Windows: <code>$ conda install -c conda-forge selenium</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br></pre></td></tr></table></figure>
<h2 id="3-Selenium-기본-사용법"><a href="#3-Selenium-기본-사용법" class="headerlink" title="3. Selenium 기본 사용법"></a>3. Selenium 기본 사용법</h2><h3 id="3-1-브라우저-open"><a href="#3-1-브라우저-open" class="headerlink" title="3.1 브라우저 open"></a>3.1 브라우저 open</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()     <span class="comment"># 객체를 만들어서 driver에 넣어줌</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-페이지-이동"><a href="#3-2-페이지-이동" class="headerlink" title="3.2 페이지 이동"></a>3.2 페이지 이동</h3><ul>
<li>url에 꼭 http를 포함해야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"http://naver.com"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-3-window-size-조절"><a href="#3-3-window-size-조절" class="headerlink" title="3.3 window size 조절"></a>3.3 window size 조절</h3><ul>
<li>반응형 웹페이지 테스트에 이용할 수 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.set_window_size(<span class="number">600</span>, <span class="number">800</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-4-브라우저-스크롤-조절"><a href="#3-4-브라우저-스크롤-조절" class="headerlink" title="3.4 브라우저 스크롤 조절"></a>3.4 브라우저 스크롤 조절</h3><ul>
<li>함수가 없는 경우에는 javascript 코드를 실행해서 컨트롤</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"window.scrollTo(200,300);"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<h3 id="3-5-윈도우-객체-저장"><a href="#3-5-윈도우-객체-저장" class="headerlink" title="3.5 윈도우 객체 저장"></a>3.5 윈도우 객체 저장</h3><ul>
<li>윈도우 객체를 저장하면 브라우저에 여러 개의 탭이 있을 때 저장되어 있는 윈도우 객체의 탭으로 돌아올 수 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">main_window = driver.current_window_handle</span><br><span class="line">main_window</span><br></pre></td></tr></table></figure>
<pre><code>&apos;CDwindow-1327F53EB33E1BF8CD1ECD3C85E4B347&apos;
</code></pre><h3 id="3-6-새로운-윈도우-탭-열기"><a href="#3-6-새로운-윈도우-탭-열기" class="headerlink" title="3.6 새로운 윈도우 탭 열기"></a>3.6 새로운 윈도우 탭 열기</h3><p>javascript 코드로 새로운 탭을 열 수 있음</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"window.open('http://google.com');"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<p>새로운 탭을 열었지만 아래와 같이 current_window(포커스)가 자동으로 바뀌지는 않음</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.current_window_handle</span><br></pre></td></tr></table></figure>
<pre><code>&apos;CDwindow-1327F53EB33E1BF8CD1ECD3C85E4B347&apos;
</code></pre><h3 id="3-7-현재-열려있는-윈도우-객체-확인"><a href="#3-7-현재-열려있는-윈도우-객체-확인" class="headerlink" title="3.7 현재 열려있는 윈도우 객체 확인"></a>3.7 현재 열려있는 윈도우 객체 확인</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">windows = driver.window_handles</span><br><span class="line">windows</span><br></pre></td></tr></table></figure>
<pre><code>[&apos;CDwindow-1327F53EB33E1BF8CD1ECD3C85E4B347&apos;,
 &apos;CDwindow-D8D228E9A26224583A54A676F95612EA&apos;]
</code></pre><h3 id="3-8-윈도우-포커스-변경"><a href="#3-8-윈도우-포커스-변경" class="headerlink" title="3.8 윈도우 포커스 변경"></a>3.8 윈도우 포커스 변경</h3><ul>
<li>current window가 자동으로 바뀌지 않았기 때문에 바꿔주기</li>
<li>이 방법으로 탭을 이동하면서 작업할 수 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to_window(windows[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.current_window_handle</span><br></pre></td></tr></table></figure>
<pre><code>&apos;CDwindow-D8D228E9A26224583A54A676F95612EA&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to_window(main_window)</span><br></pre></td></tr></table></figure>
<h3 id="3-9-페이지-새로고침"><a href="#3-9-페이지-새로고침" class="headerlink" title="3.9 페이지 새로고침"></a>3.9 페이지 새로고침</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"location.reload();"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<h3 id="3-10-alert-messege-처리"><a href="#3-10-alert-messege-처리" class="headerlink" title="3.10 alert messege 처리"></a>3.10 alert messege 처리</h3><p>alert messege 만들기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"alert('selenium test');"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<p>switch_to_alert 함수로 alert 변수에 alert 객체를 저장할 수 있음<br>alert 객의 text 값을 확인해보면 alert의 메세지를 문자열로 확인 가능</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert = driver.switch_to_alert()</span><br><span class="line">alert.text</span><br></pre></td></tr></table></figure>
<pre><code>&apos;selenium test&apos;
</code></pre><p>확인 버튼 누르기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert.accept()</span><br></pre></td></tr></table></figure>
<h3 id="3-11-confirm-처리"><a href="#3-11-confirm-처리" class="headerlink" title="3.11 confirm 처리"></a>3.11 confirm 처리</h3><ul>
<li>confirm은 alert과 달리 확인/취소 버튼이 함께 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"confirm('data')"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">confirm = driver.switch_to_alert()</span><br><span class="line">confirm.text</span><br></pre></td></tr></table></figure>
<pre><code>&apos;data&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># confirm.accept()   # 확인 버튼 클릭</span></span><br><span class="line">confirm.dismiss()    <span class="comment"># 취소 버튼 클릭</span></span><br></pre></td></tr></table></figure>
<h3 id="3-12-input창에-문자열-입력하기"><a href="#3-12-input창에-문자열-입력하기" class="headerlink" title="3.12 input창에 문자열 입력하기"></a>3.12 input창에 문자열 입력하기</h3><ul>
<li>send_keys()를 이용하여 웹페이지의 input 태그에 문자열을 입력할 수 있음</li>
<li>find_element_by_css_selector<ul>
<li>html 코드의 태그 위치에 접근하는 함수</li>
<li>파라미터로 css selector를 넣어주면 해당 selector의 태그 위치로 접근</li>
</ul>
</li>
</ul>
<p>네이버 검색창에 “데이터사이언스” 입력하기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#query"</span>).send_keys(<span class="string">"데이터사이언스"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-13-버튼-클릭하기-click-event-발생"><a href="#3-13-버튼-클릭하기-click-event-발생" class="headerlink" title="3.13 버튼 클릭하기 (click event 발생)"></a>3.13 버튼 클릭하기 (click event 발생)</h3><p>검색 버튼 눌러 “데이터사이언스” 검색 결과 확인하기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#search_btn"</span>).click()</span><br></pre></td></tr></table></figure>
<h3 id="3-14-끝내기"><a href="#3-14-끝내기" class="headerlink" title="3.14 끝내기"></a>3.14 끝내기</h3><h4 id="창-닫기-하나의-윈도우-창을-닫음"><a href="#창-닫기-하나의-윈도우-창을-닫음" class="headerlink" title="창 닫기 - 하나의 윈도우 창을 닫음"></a>창 닫기 - 하나의 윈도우 창을 닫음</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.close()</span><br></pre></td></tr></table></figure>
<h4 id="브라우저-닫기"><a href="#브라우저-닫기" class="headerlink" title="브라우저 닫기"></a>브라우저 닫기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h2 id="4-Selenium-파일-업로드"><a href="#4-Selenium-파일-업로드" class="headerlink" title="4. Selenium 파일 업로드"></a>4. Selenium 파일 업로드</h2><ul>
<li>google vision api 페이지에 이미지 파일을 업로드</li>
<li>iframe으로 이동</li>
</ul>
<h3 id="4-1-webdriver-실행하고-google-vision-api로-이동"><a href="#4-1-webdriver-실행하고-google-vision-api로-이동" class="headerlink" title="4.1 webdriver 실행하고 google vision api로 이동"></a>4.1 webdriver 실행하고 google vision api로 이동</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"https://cloud.google.com/vision/"</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(url)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.set_window_size(<span class="number">800</span>, <span class="number">800</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"window.scrollTo(0,1200);"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-iframe으로-포커스-이동"><a href="#4-2-iframe으로-포커스-이동" class="headerlink" title="4.2 iframe으로 포커스 이동"></a>4.2 iframe으로 포커스 이동</h3><ul>
<li>iframe 안에 있는 내용을 crawling하기 위해서는 꼭 iframe으로 focus switch!</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iframe = driver.find_element_by_css_selector(<span class="string">'#vision_demo_section &gt; iframe'</span>)</span><br><span class="line">driver.switch_to_frame(iframe)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## iframe에서 메인 프레임으로 돌아가기</span></span><br><span class="line"><span class="comment"># driver.switch_to_default_content()</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-파일-업로드"><a href="#4-3-파일-업로드" class="headerlink" title="4.3 파일 업로드"></a>4.3 파일 업로드</h3><ul>
<li>절대경로로 작성해야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_path = <span class="string">"/Users/hyeshinoh/Workspace/Study_Web/dog.png"</span></span><br><span class="line">driver.find_element_by_css_selector(<span class="string">'#input'</span>).send_keys(file_path)</span><br></pre></td></tr></table></figure>
<h3 id="4-4-분석-결과-확인"><a href="#4-4-분석-결과-확인" class="headerlink" title="4.4 분석 결과 확인"></a>4.4 분석 결과 확인</h3><h4 id="1-Web-결과-가져오기"><a href="#1-Web-결과-가져오기" class="headerlink" title="(1) Web 결과 가져오기"></a>(1) Web 결과 가져오기</h4><p>이미지 분석 결과에서 Web 탭을 선택</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">'#webDetection'</span>).click()</span><br></pre></td></tr></table></figure>
<p>분석 결과를 가져오기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">web_results = driver.find_elements_by_css_selector(<span class="string">'#card &gt; .container &gt; .row'</span>)[:<span class="number">15</span>]</span><br><span class="line"><span class="keyword">for</span> web_result <span class="keyword">in</span> web_results:</span><br><span class="line">    print(</span><br><span class="line">        web_result.find_element_by_css_selector(<span class="string">".name"</span>).text,</span><br><span class="line">        web_result.find_element_by_css_selector(<span class="string">".score"</span>).text</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<pre><code>Puppy 1.31475
French Bulldog 0.93836
Bulldog 0.74869
Shih Tzu 0.59496
Beagle 0.58407
Yorkshire Terrier 0.53742
Dog training 0.5303
 0.5142
Pet 0.4853
Dog breed 0.3965
stock.xchng 0.3691
Dog breeding 0.3677
Training 0.3125
Cuteness 0.3003
Dog 0
</code></pre><h4 id="2-Document-결과-사진-속-text-가져오기"><a href="#2-Document-결과-사진-속-text-가져오기" class="headerlink" title="(2) Document 결과 (사진 속 text) 가져오기"></a>(2) Document 결과 (사진 속 text) 가져오기</h4><p>이미지 분석 결과에서 Document 탭을 선택</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#fullTextAnnotation"</span>).click()</span><br></pre></td></tr></table></figure>
<p>text 데이터를 가져오기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document_results = driver.find_elements_by_css_selector(<span class="string">"#card &gt; fieldset &gt; div &gt; fieldset"</span>)</span><br><span class="line">len(document_results)</span><br></pre></td></tr></table></figure>
<pre><code>2
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">documents = []</span><br><span class="line"><span class="keyword">for</span> document_result <span class="keyword">in</span> document_results:</span><br><span class="line">    words = document_result.find_elements_by_css_selector(<span class="string">".container .word"</span>)</span><br><span class="line">    print(len(words))</span><br><span class="line">    sentence_list = []</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">        word = word.text.replace(<span class="string">" "</span>, <span class="string">""</span>)</span><br><span class="line">        sentence_list.append(word)</span><br><span class="line">    documents.append(<span class="string">" "</span>.join(sentence_list))</span><br><span class="line">documents</span><br></pre></td></tr></table></figure>
<pre><code>4
6

[&apos;In the dog house&apos;, &quot;&apos; 인기를 잃다 , 면목을 잃다&quot;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h4 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h4><ul>
<li>패스트캠퍼스, ⟪데이터사이언스스쿨 8기⟫ 수업자료</li>
</ul>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/programming/">#programming</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/web/">#web</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/crawling/">#crawling</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/web-crawling/">#web_crawling</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/웹크롤링/">#웹크롤링</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/selenium/">#selenium</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2018/10/03/2018-10-02-TIL/">2018-10-02-TIL</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2018/10/01/hexo_001/">Github 페이지와 Hexo로 블로그 만들기</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5c334172a47fe500116a8ea8&amp;product=inline-share-buttons' async='async'></script>

</div>



<div class="comments">
    <h3 class="title is-4">Comments</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://hyeshinoh.github.io/2018/10/02/web_09_selenium/';
        this.page.identifier = '2018/10/02/web_09_selenium/';
        
        this.language = 'en';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hyeshinoh' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2019 우와팬더&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" href="https://github.com/hyeshinoh">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!-- <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML'></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

</body>
</html>