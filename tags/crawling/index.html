<!DOCTYPE html>
<html  lang="en">
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
<title>Tag: crawling - 우와팬더의 블로그</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />



    <meta name="description" content="데이터사이언스를 공부합니다">
<meta name="keywords" content="data science">
<meta property="og:type" content="website">
<meta property="og:title" content="우와팬더의 블로그">
<meta property="og:url" content="http://yoursite.com/tags/crawling/index.html">
<meta property="og:site_name" content="우와팬더의 블로그">
<meta property="og:description" content="데이터사이언스를 공부합니다">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="우와팬더의 블로그">
<meta name="twitter:description" content="데이터사이언스를 공부합니다">



<link rel="alternative" href="hyeshinoh" title="우와팬더의 블로그" type="application/atom+xml">



<link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-126954393-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-126954393-1');
</script>


    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    


<link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body class="is-3-column">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="우와팬더의 블로그" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">Tags</a></li>
            <li class="is-active"><a href="#" aria-current="page">crawling</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-15T12:27:51.000Z">2018-10-15</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming-공부/">Programming 공부</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming-공부/Web-공부/">Web 공부</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    20 minutes read (About 2942 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/10/15/web_12_scrapy/">Web crawling - Scrapy</a>
            
        </h1>
        <div class="content">
            <p><a href="https://github.com/hyeshinoh/Study_Web/blob/master/web_11_scrapy.ipynb" target="_blank" rel="noopener">jupyter notebook으로 보기</a></p>
<h4 id="다룰-내용"><a href="#다룰-내용" class="headerlink" title="다룰 내용"></a>다룰 내용</h4><ul>
<li>Scrapy 개요</li>
<li>xpath<ul>
<li>xpath의 기본 문법</li>
<li>scrapy shell 환경에서 xpath</li>
<li>scrapy jupyter notebook xpath</li>
<li>네이버 실시간 검색어, 다음실시간 검색어, 지마켓 베스트 200</li>
</ul>
</li>
<li>scrapy 프로젝트를 만들어서 크롤링<ul>
<li>네이버 영화 사이트에서 현재 상영영화 링크를 크롤링</li>
<li>크롤링한 링크에서 영화 제목과 누적관객수 데이터를 크롤링</li>
<li>csv 파일로 저장</li>
</ul>
</li>
</ul>
<h2 id="1-Scrapy"><a href="#1-Scrapy" class="headerlink" title="1. Scrapy"></a>1. Scrapy</h2><ul>
<li>웹사이트에서 데이터 추출을 하기 위한 오픈소스 프레임워크 (패키지가 아님)</li>
<li><a href="http://scrapy.org" target="_blank" rel="noopener">http://scrapy.org</a></li>
<li>설치<ul>
<li>windows: <code>conda install -c conda-forge scrapy</code></li>
<li>mac: <code>pip3 install scrapy</code></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br></pre></td></tr></table></figure>
<h2 id="2-xpath"><a href="#2-xpath" class="headerlink" title="2. xpath"></a>2. xpath</h2><p>지금까지 배웠던 css selector가 아닌 xpath를 이용해서도 웹페이지의 html element를 선택할 수 있다.</p>
<h3 id="2-1-xpath의-기본-문법"><a href="#2-1-xpath의-기본-문법" class="headerlink" title="2.1 xpath의 기본 문법"></a>2.1 xpath의 기본 문법</h3><p>예시 xpath: 네이버 실시간 검색어 순위에서 [copy xpath]로 복사<br><code>//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li[1]/a/span[2]</code></p>
<ul>
<li><code>//</code>: 최상위 element를 의미</li>
<li><code>*</code>: 조건에 맞는 하위 element를 모두 살펴봄 (css selector에서 하위 element 검색: 한칸 띄우기)</li>
<li><code>[@id=&quot;PM_ID_ct&quot;]</code>: id가 PM_ID_ct 인 element를 선택<ul>
<li><code>[@&lt;key&gt;=&lt;value&gt;]</code> 형태 (css selector와 다르게 모든 속성을 <code>@&lt;key&gt;</code>로 표현)</li>
</ul>
</li>
<li><code>/</code>: 바로 아래 element를 살펴봄 (css selector의 <code>&gt;</code> 기호와 같은 의미)</li>
<li><code>[number]</code>: number번째 element를 선택 (0번부터가 아니라 1번부터 시작함)</li>
<li><code>.</code>: 현재 element를 의미</li>
<li><code>not()</code>: 조건이 아닌 element를 찾음<ul>
<li><code>not([@id=test})</code></li>
</ul>
</li>
</ul>
<h3 id="2-2-네이버-실시간-검색어-크롤링"><a href="#2-2-네이버-실시간-검색어-크롤링" class="headerlink" title="2.2 네이버 실시간 검색어 크롤링"></a>2.2 네이버 실시간 검색어 크롤링</h3><h4 id="1-스크래피-셸-사용"><a href="#1-스크래피-셸-사용" class="headerlink" title="(1) 스크래피 셸 사용"></a>(1) 스크래피 셸 사용</h4><ul>
<li><code>$ scrapy shell &quot;&lt;url&gt;&quot;</code></li>
</ul>
<h4 id="2-jupyter-notebook-사용"><a href="#2-jupyter-notebook-사용" class="headerlink" title="(2) jupyter notebook 사용"></a>(2) jupyter notebook 사용</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> TextResponse</span><br></pre></td></tr></table></figure>
<h5 id="웹페이지에-연결"><a href="#웹페이지에-연결" class="headerlink" title="웹페이지에 연결"></a>웹페이지에 연결</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"http://naver.com"</span></span><br><span class="line">rep = requests.get(url)</span><br><span class="line">response = TextResponse(rep.url, body=rep.text, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>
<h5 id="네이버-실시간-검색어-1위-element-객체"><a href="#네이버-실시간-검색어-1위-element-객체" class="headerlink" title="네이버 실시간 검색어 1위 element 객체"></a>네이버 실시간 검색어 1위 element 객체</h5><ul>
<li>xpath로 select하면 list로 return</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//*[@id="PM_ID_ct"]/div[1]/div[2]/div[2]/div[1]/div/ul/li[1]/a/span[2]'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[&lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li[1]/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;우왁굳&lt;/span&gt;&#39;&gt;]
</code></pre><h5 id="네이버-실시간-검색어-20개-element-객체"><a href="#네이버-실시간-검색어-20개-element-객체" class="headerlink" title="네이버 실시간 검색어 20개 element 객체"></a>네이버 실시간 검색어 20개 element 객체</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 네이버 실시간 검색어 20개 element 객체</span></span><br><span class="line">response.xpath(<span class="string">'//*[@id="PM_ID_ct"]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[&lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;우왁굳&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;홍현희&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;김수현&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;오영택&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;미세먼지&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;주윤발&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;박지원&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;환희유치원&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;제이쓴&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;동탄 환희유치원&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;브리짓 존스의 베이비&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;고현정&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;추상미&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;조현민&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;장학영&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;강병규&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;이한샘&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;자이언티&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;오늘 미세먼지 농도&lt;/span&gt;&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]&#39; data=&#39;&lt;span class=&quot;ah_k&quot;&gt;존조&lt;/span&gt;&#39;&gt;]
</code></pre><h5 id="객체의-text만-추출하기"><a href="#객체의-text만-추출하기" class="headerlink" title="객체의 text만 추출하기"></a>객체의 text만 추출하기</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//*[@id="PM_ID_ct"]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[&lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;우왁굳&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;홍현희&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;김수현&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;오영택&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;미세먼지&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;주윤발&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;박지원&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;환희유치원&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;제이쓴&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;동탄 환희유치원&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;브리짓 존스의 베이비&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;고현정&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;추상미&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;조현민&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;장학영&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;강병규&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;이한샘&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;자이언티&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;오늘 미세먼지 농도&#39;&gt;,
 &lt;Selector xpath=&#39;//*[@id=&quot;PM_ID_ct&quot;]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()&#39; data=&#39;존조&#39;&gt;]
</code></pre><h5 id="문자열만-추출하기"><a href="#문자열만-추출하기" class="headerlink" title="문자열만 추출하기"></a>문자열만 추출하기</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//*[@id="PM_ID_ct"]/div[1]/div[2]/div[2]/div[1]/div/ul/li/a/span[2]/text()'</span>)[:<span class="number">10</span>].extract()</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;우왁굳&#39;, &#39;홍현희&#39;, &#39;김수현&#39;, &#39;오영택&#39;, &#39;미세먼지&#39;, &#39;주윤발&#39;, &#39;박지원&#39;, &#39;환희유치원&#39;, &#39;제이쓴&#39;, &#39;동탄 환희유치원&#39;]
</code></pre><h5 id="을-이용해서-가져오기"><a href="#을-이용해서-가져오기" class="headerlink" title=".을 이용해서 가져오기"></a><code>.</code>을 이용해서 가져오기</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">keywords = response.xpath(<span class="string">'//*[@id="PM_ID_ct"]/div[1]/div[2]/div[2]/div[1]/div/ul/li'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> keyword <span class="keyword">in</span> keywords:</span><br><span class="line">    print(keyword.xpath(<span class="string">'./a/span[2]/text()'</span>)[<span class="number">0</span>].extract())</span><br></pre></td></tr></table></figure>
<pre><code>우왁굳
홍현희
김수현
오영택
미세먼지
주윤발
박지원
환희유치원
제이쓴
동탄 환희유치원
브리짓 존스의 베이비
고현정
추상미
조현민
장학영
강병규
이한샘
자이언티
오늘 미세먼지 농도
존조
</code></pre><h3 id="2-3-다음-실시간-검색어-크롤링"><a href="#2-3-다음-실시간-검색어-크롤링" class="headerlink" title="2.3 다음 실시간 검색어 크롤링"></a>2.3 다음 실시간 검색어 크롤링</h3><h5 id="다음-실시간-검색어-리스트-출력"><a href="#다음-실시간-검색어-리스트-출력" class="headerlink" title="다음 실시간 검색어 리스트 출력"></a>다음 실시간 검색어 리스트 출력</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"http://daum.net"</span></span><br><span class="line">rep = requests.get(url)</span><br><span class="line">response = TextResponse(rep.url, body=rep.text, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">response.xpath(<span class="string">'//*[@id="mArticle"]/div[2]/div[1]/div[2]/div[1]/ol/li/div/div[1]/span[2]/a/text()'</span>).extract()</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;박지원&#39;, &#39;추상미&#39;, &#39;우왁굳&#39;, &#39;강예빈&#39;, &#39;김수현 아나운서&#39;, &#39;장학영&#39;, &#39;환희유치원&#39;, &#39;미세먼지&#39;, &#39;존조&#39;, &#39;서유정&#39;]
</code></pre><h3 id="2-4-gmarket-best-item-200-크롤링"><a href="#2-4-gmarket-best-item-200-크롤링" class="headerlink" title="2.4 gmarket best item 200 크롤링"></a>2.4 gmarket best item 200 크롤링</h3><h5 id="웹페이지에-연결-1"><a href="#웹페이지에-연결-1" class="headerlink" title="웹페이지에 연결"></a>웹페이지에 연결</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"http://corners.gmarket.co.kr/Bestsellers"</span></span><br><span class="line">rep = requests.get(url)</span><br><span class="line">response = TextResponse(rep.url, body=rep.text, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>
<h5 id="베스트-200-아이템-제목-문자열-리스트로-가져오기"><a href="#베스트-200-아이템-제목-문자열-리스트로-가져오기" class="headerlink" title="베스트 200 아이템 제목 문자열 리스트로 가져오기"></a>베스트 200 아이템 제목 문자열 리스트로 가져오기</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">titles = response.xpath(<span class="string">'//*[@id="gBestWrap"]/div/div[3]/div[2]/ul/li/a/text()'</span>).extract()</span><br><span class="line">print(len(titles))</span><br><span class="line">titles[<span class="number">195</span>:<span class="number">199</span>]</span><br></pre></td></tr></table></figure>
<pre><code>200

[&#39;일본수출 초극세사이불/백화점납품/ 피톤치드가공10mm&#39;,
 &#39;제로스킨 아이폰 갤럭시 핸드폰케이스 6 7 8 X S 노트&#39;,
 &#39;(국산)고급 반코팅 100켤레 이중코팅 면 목장갑 작업&#39;,
 &#39;[다이소]공식판매처/택배박스/봉투/로고인쇄/당일발송/소량&#39;]
</code></pre><h5 id="200개-아이템에서-li-클래스가-first인-데이터만-가져오기"><a href="#200개-아이템에서-li-클래스가-first인-데이터만-가져오기" class="headerlink" title="200개 아이템에서 li 클래스가 first인 데이터만 가져오기"></a>200개 아이템에서 li 클래스가 first인 데이터만 가져오기</h5><ul>
<li>클래스가 first인 아이템은 한 줄에 4개씩 나타나는 상품 중 각 줄의 첫번째 상품</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">titles = response.xpath(<span class="string">'//*[@id="gBestWrap"]/div/div[3]/div[2]/ul/li[@class="first"]/a/text()'</span>).extract()</span><br><span class="line">len(titles)</span><br></pre></td></tr></table></figure>
<pre><code>50
</code></pre><h5 id="200개-아이템에서-li-클래스가-first가-아닌-데이터만-가져오기"><a href="#200개-아이템에서-li-클래스가-first가-아닌-데이터만-가져오기" class="headerlink" title="200개 아이템에서 li 클래스가 first가 아닌 데이터만 가져오기"></a>200개 아이템에서 li 클래스가 first가 아닌 데이터만 가져오기</h5><ul>
<li><code>not()</code>을 사용</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">titles = response.xpath(<span class="string">'//*[@id="gBestWrap"]/div/div[3]/div[2]/ul/li[not(@class="first")]/a/text()'</span>).extract()</span><br><span class="line">len(titles)</span><br></pre></td></tr></table></figure>
<pre><code>150
</code></pre><h2 id="3-Scrapy-project"><a href="#3-Scrapy-project" class="headerlink" title="3. Scrapy project"></a>3. Scrapy project</h2><ul>
<li>jupyter notebook이 아닌 atom에서 작성</li>
<li>네이버 영화 페이지에서 현재 상영되고 있는 영화의 제목과 관람객수를 크롤링</li>
</ul>
<h3 id="3-1-scrapy-프로젝트-생성"><a href="#3-1-scrapy-프로젝트-생성" class="headerlink" title="3.1 scrapy 프로젝트 생성"></a>3.1 scrapy 프로젝트 생성</h3><ul>
<li>project 생성: <code>$ scrapy startproject &lt;project_name&gt;</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! scrapy startproject crawler</span><br></pre></td></tr></table></figure>
<pre><code>New Scrapy project &#39;crawler&#39;, using template directory &#39;/usr/local/lib/python3.6/site-packages/scrapy/templates/project&#39;, created in:
    /Users/hyeshinoh/Workspace/Study_Web/crawler

You can start your first spider with:
    cd crawler
    scrapy genspider example example.com
</code></pre><h3 id="3-2-scrapy-프로젝트-파일-설명"><a href="#3-2-scrapy-프로젝트-파일-설명" class="headerlink" title="3.2 scrapy 프로젝트 파일 설명"></a>3.2 scrapy 프로젝트 파일 설명</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! tree crawler</span><br></pre></td></tr></table></figure>
<pre><code>crawler
├── crawler
│   ├── __init__.py
│   ├── __pycache__
│   ├── items.py
│   ├── middlewares.py
│   ├── pipelines.py
│   ├── settings.py
│   └── spiders
│       ├── __init__.py
│       └── __pycache__
└── scrapy.cfg

4 directories, 7 files
</code></pre><h4 id="project-구조"><a href="#project-구조" class="headerlink" title="project 구조"></a>project 구조</h4><ul>
<li>spiders directory <ul>
<li>어떤 웹사이트를 어떻게 크롤링할 것인가를 명시하고, 각각의 웹 페이지의 어떤 부분을 스크래핑할 것인지 명시하는 클래스가 모여있는 디렉토리</li>
<li>여러개의 spider.py 파일을 만들어 사용할 수 있음</li>
</ul>
</li>
<li>items.py<ul>
<li>크롤링하는 데이터에 대해 정의하는 클래스가 있는 파일(MVC → M)</li>
</ul>
</li>
<li>pipelines.py<ul>
<li>item 객체 형태로 크롤링을 하고 출력하기 전에 item을 받아서 실행하는 파일이 정의되어 있는 파일</li>
<li>item을 자유롭게 가공하거나 다양한 파일 형태로 저장할 수 있도록 하는 클래스</li>
</ul>
</li>
<li>settings.py<ul>
<li>spider나 item pipeline 등이 어떻게 동작하게 할지에 대한 세부적 설정이 담겨 있는 파일 </li>
<li>e.g. robots.txt 정책을 따를 것인지 안 따를 것인지, pipeline을 사용할지 안 할지</li>
</ul>
</li>
</ul>
<h3 id="3-3-크롤링-코드-작성"><a href="#3-3-크롤링-코드-작성" class="headerlink" title="3.3 크롤링 코드 작성"></a>3.3 크롤링 코드 작성</h3><h4 id="※-yield"><a href="#※-yield" class="headerlink" title="※ yield"></a>※ yield</h4><h5 id="iterator와-generator"><a href="#iterator와-generator" class="headerlink" title="iterator와 generator"></a>iterator와 generator</h5><ul>
<li>iterator: 순서가 있는 데이터의 집합</li>
<li>generator: 함수가 호출될 때마다 순서대로 결과가 나오는 집합<ul>
<li><code>return</code>으로 한번에 데이터를 return하는 것보다 <code>yield</code>로 하나씩 return하면 resource를 절약할 수 있음</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># iterator data</span></span><br><span class="line">ls = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generator data</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">number</span><span class="params">()</span>:</span>    <span class="comment"># generator를 만드는 함수</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n = number()</span><br><span class="line">n</span><br></pre></td></tr></table></figure>
<pre><code>&lt;generator object number at 0x11052c620&gt;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n.__next__()</span><br></pre></td></tr></table></figure>
<pre><code>1
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n.__next__()</span><br></pre></td></tr></table></figure>
<pre><code>2
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n.__next__()</span><br></pre></td></tr></table></figure>
<pre><code>3
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n.__next__()</span><br></pre></td></tr></table></figure>
<pre><code>---------------------------------------------------------------------------

StopIteration                             Traceback (most recent call last)

&lt;ipython-input-23-8d5cb7b534a9&gt; in &lt;module&gt;()
----&gt; 1 n.__next__()


StopIteration: 
</code></pre><h4 id="1-items-py"><a href="#1-items-py" class="headerlink" title="(1) items.py"></a>(1) items.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># https://doc.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CrawlerItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    count = scrapy.Field()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br></pre></td></tr></table></figure>
<h4 id="2-spider-py"><a href="#2-spider-py" class="headerlink" title="(2) spider.py"></a>(2) spider.py</h4><ul>
<li>가장 먼저 실행되는 파일</li>
<li>기본적 변수<ul>
<li>name: scrapy 명령어로 spider를 실행할 때 argument로 쓰는 name</li>
<li>domain: 크롤링할 domain</li>
<li>start_urls: 가장 먼저 크롤링을 시작할 (처음에 request를 던질) url</li>
</ul>
</li>
</ul>
<h4 id="크롤링-함수-작성"><a href="#크롤링-함수-작성" class="headerlink" title="크롤링 함수 작성"></a>크롤링 함수 작성</h4><p>먼저, jupyter notebook 상에서 네이버 영화 페이지에서 현재 상영영화 링크 리스트 크롤링해본다.<br>(jupyter notebook 상에서 크롤링이 제대로 되는지 확인해보고, 파이썬 파일로 작성하기 위함)</p>
<ul>
<li>상영중인 영화 리스트 받아오기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"https://movie.naver.com/movie/running/current.nhn"</span></span><br><span class="line">rep = requests.get(url)</span><br><span class="line">response = TextResponse(rep.url, body=rep.text, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">links = response.xpath(<span class="string">'//*[@id="content"]/div[1]/div[1]/div[3]/ul/li/dl/dt/a/@href'</span>)[:<span class="number">10</span>].extract()</span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> links:</span><br><span class="line">    print(response.urljoin(link))    <span class="comment"># domain과 연결시켜줌</span></span><br></pre></td></tr></table></figure>
<pre><code>https://movie.naver.com/movie/bi/mi/basic.nhn?code=167105
https://movie.naver.com/movie/bi/mi/basic.nhn?code=119428
https://movie.naver.com/movie/bi/mi/basic.nhn?code=155356
https://movie.naver.com/movie/bi/mi/basic.nhn?code=168050
https://movie.naver.com/movie/bi/mi/basic.nhn?code=163533
https://movie.naver.com/movie/bi/mi/basic.nhn?code=168023
https://movie.naver.com/movie/bi/mi/basic.nhn?code=178402
https://movie.naver.com/movie/bi/mi/basic.nhn?code=164992
https://movie.naver.com/movie/bi/mi/basic.nhn?code=172040
https://movie.naver.com/movie/bi/mi/basic.nhn?code=97612
</code></pre><ul>
<li>영화의 제목과 누적 관객수 받아오기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"https://movie.naver.com/movie/bi/mi/basic.nhn?code=159892"</span></span><br><span class="line">rep = requests.get(url)</span><br><span class="line">response = TextResponse(rep.url, body=rep.text, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_page_contents</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    item = CrawlerItem()</span><br><span class="line">    item[<span class="string">"title"</span>] = response.xpath(<span class="string">'//*[@id="content"]/div[1]/div[2]/div[1]/h3/a[1]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        item[<span class="string">"count"</span>] = response.xpath(<span class="string">'//*[@id="content"]/div[1]/div[2]/div[1]/dl/dd[5]/div/p[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        item[<span class="string">"count"</span>] = <span class="string">"0명"</span></span><br><span class="line">    <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure>
<h4 id="nm-spider-py-작성"><a href="#nm-spider-py-작성" class="headerlink" title="nm_spider.py 작성"></a>nm_spider.py 작성</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> crawler.items <span class="keyword">import</span> CrawlerItem    <span class="comment"># 위에서 작성한 items.py를 불러옴</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># start_urls -&gt; parse -&gt; parse_page_contents 순으로 호출</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NaverMovieSpider</span><span class="params">(scrapy.Spider)</span>:</span>    <span class="comment"># scrapy.Spider 클래스를 상속 받음 (크롤링에 필요한 기능이 들어가 있음)</span></span><br><span class="line">    name = <span class="string">"naver_movie"</span>   </span><br><span class="line">    allow_domain = [<span class="string">"https://movie.naver.com"</span>]</span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">"https://movie.naver.com/movie/running/current.nhn"</span></span><br><span class="line">    ]    </span><br><span class="line"></span><br><span class="line">    <span class="comment"># link 리스트를 가져옴 (start url을 request로 던지고 그 response를 parse 함수가 받음)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        links = response.xpath(<span class="string">'//*[@id="content"]/div[1]/div[1]/div[3]/ul/li/dl/dt/a/@href'</span>)[:<span class="number">10</span>].extract()</span><br><span class="line">        <span class="keyword">for</span> link <span class="keyword">in</span> links:</span><br><span class="line">            link = response.urljoin(link)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(link, callback=self.parse_page_contents)  <span class="comment"># yield가 10개 생성됨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 각페이지의 link로 접속하여 데이터를 가져옴</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_page_contents</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        item = CrawlerItem()    <span class="comment"># item obj.를 만들어 줌</span></span><br><span class="line">        item[<span class="string">"title"</span>] = response.xpath(<span class="string">'//*[@id="content"]/div[1]/div[2]/div[1]/h3/a[1]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            item[<span class="string">"count"</span>] = response.xpath(<span class="string">'//*[@id="content"]/div[1]/div[2]/div[1]/dl/dd[5]/div/p[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            item[<span class="string">"count"</span>] = <span class="string">"0명"</span></span><br><span class="line">        <span class="keyword">yield</span> item      <span class="comment"># 10개 만들어진 generator마다 한 번 실행됨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br></pre></td></tr></table></figure>
<h4 id="3-settings-py"><a href="#3-settings-py" class="headerlink" title="(3) settings.py"></a>(3) settings.py</h4><ul>
<li>크롤링하려는 사이트의 robots.txt 정책에 따라 obey 여부를 조정</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Obey robots.txt rules</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br></pre></td></tr></table></figure>
<h4 id="4-spider-실행"><a href="#4-spider-실행" class="headerlink" title="(4) spider 실행"></a>(4) spider 실행</h4><ul>
<li>실행 위치: 프로젝트 디렉토리에서 실행(item.py 파일이 있는 디렉토리)</li>
<li>명령어<ul>
<li><code>$ scrapy crawl naver_movie</code></li>
<li>csv 파일로 결과 저장 옵션: <code>$ scrapy crawl naver_movie -o movie.csv</code><ul>
<li>단, 이렇게 저장하면 column 순서를 지정할 수 없음 (pipeline으로 지정할 수 있음)</li>
</ul>
</li>
</ul>
</li>
<li>비동기 thread로 처리되기 때문에 영화 데이터가 순서대로 크롤링되지 않음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.read_csv(<span class="string">"movie.csv"</span>)</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>count</th>
<th>title</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>2,833,821명</td>
<td>암수살인</td>
</tr>
<tr>
<td>1</td>
<td>15,248명</td>
<td>리즈와 파랑새</td>
</tr>
<tr>
<td>2</td>
<td>395,867명</td>
<td>곰돌이 푸 다시 만나 행복해</td>
</tr>
<tr>
<td>3</td>
<td>0명</td>
<td>다이노 어드벤처2: 육해공 공룡 대백과</td>
</tr>
<tr>
<td>4</td>
<td>153,398명</td>
<td>스타 이즈 본</td>
</tr>
<tr>
<td>5</td>
<td>18,318명</td>
<td>극장판 가면라이더 이그제이드: 트루 엔딩</td>
</tr>
<tr>
<td>6</td>
<td>193,789명</td>
<td>미쓰백</td>
</tr>
<tr>
<td>7</td>
<td>794,815명</td>
<td>그랜드 부다페스트 호텔</td>
</tr>
<tr>
<td>8</td>
<td>5,352,401명</td>
<td>안시성</td>
</tr>
<tr>
<td>9</td>
<td>3,249,358명</td>
<td>베놈</td>
</tr>
</tbody>
</table>
</div>
<h4 id="5-pipeline-py"><a href="#5-pipeline-py" class="headerlink" title="(5) pipeline.py"></a>(5) pipeline.py</h4><ul>
<li>pipeline을 사용해서 크롤링한 데이터를 column 순서를 지정해서 csv 파일로 저장할 수 있음</li>
<li>크롤러를 실행할 때 CrawlerPipeline 객체를 생성하고 아이템을 하나씩 크롤링할 때마다 process_item 함수를 실행</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CrawlerPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.csvwriter = csv.writer(open(<span class="string">"NaverMovie.csv"</span>,<span class="string">"wt"</span>))</span><br><span class="line">        self.csvwriter.writerow([<span class="string">"title"</span>, <span class="string">"count"</span>])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        row = []</span><br><span class="line">        row.append(item[<span class="string">"title"</span>])</span><br><span class="line">        row.append(item[<span class="string">"count"</span>])</span><br><span class="line">        self.csvwriter.writerow(row)</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br></pre></td></tr></table></figure>
<p>settings.py 수정 (주석 해제)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line"></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">    <span class="string">'crawler.pipelines.CrawlerPipeline'</span>:<span class="number">300</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br></pre></td></tr></table></figure>
<p>다시 scrapy 실행시 결과 파일의 column이 title, count 순서로 만들어짐</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.read_csv(<span class="string">"NaverMovie.csv"</span>)</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>title</th>
<th>count</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>암수살인</td>
<td>2,833,821명</td>
</tr>
<tr>
<td>1</td>
<td>리즈와 파랑새</td>
<td>15,248명</td>
</tr>
<tr>
<td>2</td>
<td>다이노 어드벤처2: 육해공 공룡 대백과</td>
<td>0명</td>
</tr>
<tr>
<td>3</td>
<td>곰돌이 푸 다시 만나 행복해</td>
<td>395,867명</td>
</tr>
<tr>
<td>4</td>
<td>스타 이즈 본</td>
<td>153,398명</td>
</tr>
<tr>
<td>5</td>
<td>극장판 가면라이더 이그제이드: 트루 엔딩</td>
<td>18,318명</td>
</tr>
<tr>
<td>6</td>
<td>안시성</td>
<td>5,352,401명</td>
</tr>
<tr>
<td>7</td>
<td>미쓰백</td>
<td>193,789명</td>
</tr>
<tr>
<td>8</td>
<td>그랜드 부다페스트 호텔</td>
<td>794,815명</td>
</tr>
<tr>
<td>9</td>
<td>베놈</td>
<td>3,249,358명</td>
</tr>
</tbody>
</table>
</div>
<h3 id="덧"><a href="#덧" class="headerlink" title="덧"></a>덧</h3><ul>
<li>yield, callback 구조를 이해하면 그 단계를 다양하게 구성할 수 있음</li>
<li>동적페이지를 크롤링하려면 <code>__init__()</code> 함수로 driver를 만들고 driver를 사용해서 크롤링</li>
</ul>
<p><a href="https://github.com/hyeshinoh/Study_Web/blob/master/web_11_scrapy.ipynb" target="_blank" rel="noopener">jupyter notebook으로 보기</a></p>
<h4 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h4><ul>
<li>패스트캠퍼스, ⟪데이터사이언스스쿨 8기⟫ 수업자료</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-05T11:47:51.000Z">2018-10-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming-공부/">Programming 공부</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming-공부/Web-공부/">Web 공부</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 944 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/10/05/web_11_selenium_exercise/">Web crawling exercise</a>
            
        </h1>
        <div class="content">
            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br></pre></td></tr></table></figure>
<h2 id="Quiz-1"><a href="#Quiz-1" class="headerlink" title="Quiz 1"></a>Quiz 1</h2><ul>
<li>아래 URL의 NBA 데이터를 크롤링하여 판다스 데이터 프레임으로 나타내세요.</li>
<li><a href="http://stats.nba.com/teams/traditional/?sort=GP&amp;dir=-1" target="_blank" rel="noopener">http://stats.nba.com/teams/traditional/?sort=GP&amp;dir=-1</a></li>
</ul>
<h3 id="1-1-webdriver를-실행하고-사이트에-접속하기"><a href="#1-1-webdriver를-실행하고-사이트에-접속하기" class="headerlink" title="1.1 webdriver를 실행하고 사이트에 접속하기"></a>1.1 webdriver를 실행하고 사이트에 접속하기</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"http://stats.nba.com/teams/traditional/?sort=GP&amp;dir=-1"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(url)</span><br></pre></td></tr></table></figure>
<p>링크로 들어가면 GP로 정렬되어 있는 상태임<br><img src="https://github.com/hyeshinoh/Study_Web/blob/master/web_10_image_001.png?raw=true" alt=""></p>
<h3 id="1-2-표-데이터-받아오기"><a href="#1-2-표-데이터-받아오기" class="headerlink" title="1.2 표 데이터 받아오기"></a>1.2 표 데이터 받아오기</h3><h4 id="1-column-이름을-받아와서-pandas-dataframe-만들기"><a href="#1-column-이름을-받아와서-pandas-dataframe-만들기" class="headerlink" title="(1) column 이름을 받아와서 pandas dataframe 만들기"></a>(1) column 이름을 받아와서 pandas dataframe 만들기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">columns = driver.find_elements_by_css_selector(<span class="string">"div.nba-stat-table__overflow &gt; table &gt; thead &gt; tr &gt; th"</span>)[:<span class="number">28</span>]</span><br><span class="line">len(columns)</span><br></pre></td></tr></table></figure>
<pre><code>28
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls_column = []</span><br><span class="line"><span class="keyword">for</span> column <span class="keyword">in</span> columns:</span><br><span class="line">    ls_column.append(column.text)</span><br><span class="line">    </span><br><span class="line">ls_column</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;&#39;,
 &#39;TEAM&#39;,
 &#39;GP&#39;,
 &#39;W&#39;,
 &#39;L&#39;,
 &#39;WIN%&#39;,
 &#39;MIN&#39;,
 &#39;PTS&#39;,
 &#39;FGM&#39;,
 &#39;FGA&#39;,
 &#39;FG%&#39;,
 &#39;3PM&#39;,
 &#39;3PA&#39;,
 &#39;3P%&#39;,
 &#39;FTM&#39;,
 &#39;FTA&#39;,
 &#39;FT%&#39;,
 &#39;OREB&#39;,
 &#39;DREB&#39;,
 &#39;REB&#39;,
 &#39;AST&#39;,
 &#39;TOV&#39;,
 &#39;STL&#39;,
 &#39;BLK&#39;,
 &#39;BLKA&#39;,
 &#39;PF&#39;,
 &#39;PFD&#39;,
 &#39;+/-&#39;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(columns = ls_column)</span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>TEAM</th>
<th>GP</th>
<th>W</th>
<th>L</th>
<th>WIN%</th>
<th>MIN</th>
<th>PTS</th>
<th>FGM</th>
<th>FGA</th>
<th>…</th>
<th>DREB</th>
<th>REB</th>
<th>AST</th>
<th>TOV</th>
<th>STL</th>
<th>BLK</th>
<th>BLKA</th>
<th>PF</th>
<th>PFD</th>
<th>+/-</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<h4 id="2-각-row의-팀별-데이터를-받아와서-dataframe에-넣기"><a href="#2-각-row의-팀별-데이터를-받아와서-dataframe에-넣기" class="headerlink" title="(2) 각 row의 팀별 데이터를 받아와서 dataframe에 넣기"></a>(2) 각 row의 팀별 데이터를 받아와서 dataframe에 넣기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">team_stat = driver.find_elements_by_css_selector(<span class="string">"div.nba-stat-table__overflow &gt; table &gt; tbody &gt; tr"</span>)</span><br><span class="line">len(team_stat)</span><br></pre></td></tr></table></figure>
<pre><code>35
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> stat <span class="keyword">in</span> team_stat:</span><br><span class="line">    stats = stat.find_elements_by_css_selector(<span class="string">"td"</span>)</span><br><span class="line">    stat = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(stats)):</span><br><span class="line">        stat[ls_column[i]] = stats[i].text</span><br><span class="line">    df.loc[len(df)] = stat</span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>TEAM</th>
<th>GP</th>
<th>W</th>
<th>L</th>
<th>WIN%</th>
<th>MIN</th>
<th>PTS</th>
<th>FGM</th>
<th>FGA</th>
<th>…</th>
<th>DREB</th>
<th>REB</th>
<th>AST</th>
<th>TOV</th>
<th>STL</th>
<th>BLK</th>
<th>BLKA</th>
<th>PF</th>
<th>PFD</th>
<th>+/-</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>Charlotte Hornets</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>.667</td>
<td>48.0</td>
<td>112.7</td>
<td>38.0</td>
<td>84.0</td>
<td>…</td>
<td>43.3</td>
<td>49.0</td>
<td>24.0</td>
<td>15.3</td>
<td>5.3</td>
<td>7.3</td>
<td>5.7</td>
<td>24.0</td>
<td>29.7</td>
<td>4.3</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>Los Angeles Lakers</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>.333</td>
<td>48.0</td>
<td>115.3</td>
<td>41.3</td>
<td>83.0</td>
<td>…</td>
<td>35.3</td>
<td>41.0</td>
<td>24.3</td>
<td>21.0</td>
<td>9.0</td>
<td>6.7</td>
<td>4.0</td>
<td>28.7</td>
<td>32.3</td>
<td>-4.7</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>Boston Celtics</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>.333</td>
<td>48.0</td>
<td>102.3</td>
<td>37.7</td>
<td>93.7</td>
<td>…</td>
<td>40.0</td>
<td>50.0</td>
<td>18.3</td>
<td>12.3</td>
<td>8.3</td>
<td>6.7</td>
<td>5.3</td>
<td>30.7</td>
<td>24.0</td>
<td>-3.7</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>Minnesota Timberwolves</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>.500</td>
<td>48.0</td>
<td>107.5</td>
<td>34.5</td>
<td>87.5</td>
<td>…</td>
<td>32.5</td>
<td>42.5</td>
<td>13.5</td>
<td>16.5</td>
<td>7.5</td>
<td>7.5</td>
<td>8.0</td>
<td>20.5</td>
<td>30.5</td>
<td>-11.5</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>Denver Nuggets</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>118.5</td>
<td>40.0</td>
<td>85.5</td>
<td>…</td>
<td>32.5</td>
<td>45.0</td>
<td>27.0</td>
<td>23.5</td>
<td>12.0</td>
<td>4.5</td>
<td>7.0</td>
<td>26.5</td>
<td>30.5</td>
<td>9.5</td>
</tr>
<tr>
<td>5</td>
<td>4</td>
<td>Houston</td>
<td>Rockets</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>.500</td>
<td>48.0</td>
<td>115.5</td>
<td>37.5</td>
<td>80.0</td>
<td>…</td>
<td>33.0</td>
<td>41.0</td>
<td>23.0</td>
<td>24.0</td>
<td>11.0</td>
<td>7.5</td>
<td>4.0</td>
<td>31.5</td>
<td>31.5</td>
<td>3.0</td>
</tr>
<tr>
<td>6</td>
<td>4</td>
<td>LA Clippers</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>119.0</td>
<td>45.0</td>
<td>89.0</td>
<td>…</td>
<td>37.0</td>
<td>45.5</td>
<td>33.5</td>
<td>16.5</td>
<td>8.5</td>
<td>7.5</td>
<td>5.5</td>
<td>32.0</td>
<td>25.5</td>
<td>23.0</td>
</tr>
<tr>
<td>7</td>
<td>4</td>
<td>Miami Heat</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>.000</td>
<td>48.0</td>
<td>106.5</td>
<td>37.0</td>
<td>94.5</td>
<td>…</td>
<td>36.5</td>
<td>52.0</td>
<td>20.0</td>
<td>16.0</td>
<td>9.0</td>
<td>4.5</td>
<td>8.0</td>
<td>27.5</td>
<td>30.0</td>
<td>-6.5</td>
</tr>
<tr>
<td>8</td>
<td>4</td>
<td>Chicago Bulls</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>.500</td>
<td>48.0</td>
<td>105.0</td>
<td>41.0</td>
<td>100.5</td>
<td>…</td>
<td>38.0</td>
<td>47.5</td>
<td>23.0</td>
<td>9.5</td>
<td>7.5</td>
<td>3.0</td>
<td>7.0</td>
<td>19.5</td>
<td>18.0</td>
<td>-11.0</td>
</tr>
<tr>
<td>9</td>
<td>4</td>
<td>New Orleans Pelicans</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>.000</td>
<td>48.0</td>
<td>109.0</td>
<td>41.0</td>
<td>100.5</td>
<td>…</td>
<td>38.5</td>
<td>49.5</td>
<td>24.5</td>
<td>18.0</td>
<td>5.0</td>
<td>5.5</td>
<td>8.0</td>
<td>23.5</td>
<td>24.0</td>
<td>-13.0</td>
</tr>
<tr>
<td>10</td>
<td>4</td>
<td>New York Knicks</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>1.000</td>
<td>50.5</td>
<td>115.5</td>
<td>38.5</td>
<td>85.0</td>
<td>…</td>
<td>40.5</td>
<td>50.0</td>
<td>19.5</td>
<td>22.5</td>
<td>11.0</td>
<td>6.5</td>
<td>5.0</td>
<td>36.5</td>
<td>34.5</td>
<td>4.0</td>
</tr>
<tr>
<td>11</td>
<td>4</td>
<td>Philadelphia 76ers</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>112.0</td>
<td>39.5</td>
<td>83.0</td>
<td>…</td>
<td>36.0</td>
<td>48.0</td>
<td>25.0</td>
<td>18.5</td>
<td>8.5</td>
<td>8.0</td>
<td>2.5</td>
<td>24.5</td>
<td>29.5</td>
<td>13.0</td>
</tr>
<tr>
<td>12</td>
<td>4</td>
<td>Phoenix Suns</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>.500</td>
<td>48.0</td>
<td>96.5</td>
<td>31.5</td>
<td>75.5</td>
<td>…</td>
<td>37.0</td>
<td>48.0</td>
<td>20.5</td>
<td>20.0</td>
<td>7.5</td>
<td>9.0</td>
<td>4.5</td>
<td>32.0</td>
<td>28.5</td>
<td>0.5</td>
</tr>
<tr>
<td>13</td>
<td>4</td>
<td>Sacramento Kings</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>.500</td>
<td>48.0</td>
<td>114.5</td>
<td>42.0</td>
<td>90.5</td>
<td>…</td>
<td>31.5</td>
<td>40.5</td>
<td>25.5</td>
<td>16.0</td>
<td>6.5</td>
<td>3.5</td>
<td>5.0</td>
<td>38.0</td>
<td>29.0</td>
<td>-0.5</td>
</tr>
<tr>
<td>14</td>
<td>4</td>
<td>Toronto Raptors</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>.500</td>
<td>48.0</td>
<td>106.0</td>
<td>34.0</td>
<td>89.0</td>
<td>…</td>
<td>35.5</td>
<td>48.5</td>
<td>13.0</td>
<td>18.5</td>
<td>8.5</td>
<td>5.5</td>
<td>4.0</td>
<td>28.5</td>
<td>35.5</td>
<td>1.5</td>
</tr>
<tr>
<td>15</td>
<td>4</td>
<td>Utah Jazz</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>117.5</td>
<td>44.0</td>
<td>89.5</td>
<td>…</td>
<td>47.0</td>
<td>56.5</td>
<td>28.5</td>
<td>19.0</td>
<td>8.5</td>
<td>5.5</td>
<td>3.0</td>
<td>27.0</td>
<td>27.0</td>
<td>36.5</td>
</tr>
<tr>
<td>16</td>
<td>17</td>
<td>Memphis Grizzlies</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>115.0</td>
<td>40.0</td>
<td>85.0</td>
<td>…</td>
<td>27.0</td>
<td>40.0</td>
<td>24.0</td>
<td>23.0</td>
<td>11.0</td>
<td>2.0</td>
<td>7.0</td>
<td>37.0</td>
<td>34.0</td>
<td>-16.0</td>
</tr>
<tr>
<td>17</td>
<td>17</td>
<td>Beijing Ducks</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>63.0</td>
<td>17.0</td>
<td>71.0</td>
<td>…</td>
<td>22.0</td>
<td>33.0</td>
<td>12.0</td>
<td>17.0</td>
<td>4.0</td>
<td>2.0</td>
<td>10.0</td>
<td>32.0</td>
<td>29.0</td>
<td>-53.0</td>
</tr>
<tr>
<td>18</td>
<td>17</td>
<td>Milwaukee Bucks</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>116.0</td>
<td>44.0</td>
<td>89.0</td>
<td>…</td>
<td>53.0</td>
<td>64.0</td>
<td>28.0</td>
<td>13.0</td>
<td>3.0</td>
<td>7.0</td>
<td>2.0</td>
<td>12.0</td>
<td>19.0</td>
<td>34.0</td>
</tr>
<tr>
<td>19</td>
<td>17</td>
<td>Atlanta Hawks</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>116.0</td>
<td>48.0</td>
<td>105.0</td>
<td>…</td>
<td>44.0</td>
<td>54.0</td>
<td>32.0</td>
<td>18.0</td>
<td>7.0</td>
<td>12.0</td>
<td>4.0</td>
<td>28.0</td>
<td>23.0</td>
<td>14.0</td>
</tr>
<tr>
<td>20</td>
<td>17</td>
<td>Detroit Pistons</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>97.0</td>
<td>39.0</td>
<td>84.0</td>
<td>…</td>
<td>35.0</td>
<td>45.0</td>
<td>19.0</td>
<td>16.0</td>
<td>6.0</td>
<td>5.0</td>
<td>3.0</td>
<td>30.0</td>
<td>25.0</td>
<td>6.0</td>
</tr>
<tr>
<td>21</td>
<td>17</td>
<td>Golden State Warriors</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>110.0</td>
<td>44.0</td>
<td>93.0</td>
<td>…</td>
<td>41.0</td>
<td>48.0</td>
<td>33.0</td>
<td>17.0</td>
<td>9.0</td>
<td>8.0</td>
<td>6.0</td>
<td>23.0</td>
<td>16.0</td>
<td>-4.0</td>
</tr>
<tr>
<td>22</td>
<td>17</td>
<td>New Zealand Breakers</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>86.0</td>
<td>31.0</td>
<td>87.0</td>
<td>…</td>
<td>32.0</td>
<td>43.0</td>
<td>16.0</td>
<td>14.0</td>
<td>9.0</td>
<td>5.0</td>
<td>14.0</td>
<td>25.0</td>
<td>31.0</td>
<td>-5.0</td>
</tr>
<tr>
<td>23</td>
<td>17</td>
<td>Oklahoma City Thunder</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>91.0</td>
<td>30.0</td>
<td>82.0</td>
<td>…</td>
<td>33.0</td>
<td>47.0</td>
<td>21.0</td>
<td>16.0</td>
<td>6.0</td>
<td>3.0</td>
<td>5.0</td>
<td>25.0</td>
<td>30.0</td>
<td>-6.0</td>
</tr>
<tr>
<td>24</td>
<td>17</td>
<td>Orlando Magic</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>114.0</td>
<td>45.0</td>
<td>91.0</td>
<td>…</td>
<td>30.0</td>
<td>35.0</td>
<td>27.0</td>
<td>12.0</td>
<td>6.0</td>
<td>4.0</td>
<td>7.0</td>
<td>33.0</td>
<td>30.0</td>
<td>-6.0</td>
</tr>
<tr>
<td>25</td>
<td>17</td>
<td>Perth Wildcats</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>72.0</td>
<td>23.0</td>
<td>85.0</td>
<td>…</td>
<td>30.0</td>
<td>41.0</td>
<td>12.0</td>
<td>19.0</td>
<td>9.0</td>
<td>1.0</td>
<td>5.0</td>
<td>25.0</td>
<td>28.0</td>
<td>-58.0</td>
</tr>
<tr>
<td>26</td>
<td>17</td>
<td>Brooklyn Nets</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>102.0</td>
<td>37.0</td>
<td>95.0</td>
<td>…</td>
<td>29.0</td>
<td>45.0</td>
<td>21.0</td>
<td>18.0</td>
<td>12.0</td>
<td>3.0</td>
<td>11.0</td>
<td>30.0</td>
<td>29.0</td>
<td>-5.0</td>
</tr>
<tr>
<td>27</td>
<td>17</td>
<td>Indiana Pacers</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>110.0</td>
<td>40.0</td>
<td>91.0</td>
<td>…</td>
<td>35.0</td>
<td>48.0</td>
<td>18.0</td>
<td>21.0</td>
<td>11.0</td>
<td>6.0</td>
<td>8.0</td>
<td>26.0</td>
<td>29.0</td>
<td>10.0</td>
</tr>
<tr>
<td>28</td>
<td>17</td>
<td>Portland Trail Blazers</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>104.0</td>
<td>37.0</td>
<td>88.0</td>
<td>…</td>
<td>35.0</td>
<td>46.0</td>
<td>25.0</td>
<td>24.0</td>
<td>4.0</td>
<td>2.0</td>
<td>6.0</td>
<td>45.0</td>
<td>28.0</td>
<td>-18.0</td>
</tr>
<tr>
<td>29</td>
<td>17</td>
<td>Cleveland Cavaliers</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>102.0</td>
<td>33.0</td>
<td>80.0</td>
<td>…</td>
<td>36.0</td>
<td>49.0</td>
<td>13.0</td>
<td>18.0</td>
<td>8.0</td>
<td>4.0</td>
<td>7.0</td>
<td>30.0</td>
<td>30.0</td>
<td>7.0</td>
</tr>
<tr>
<td>30</td>
<td>17</td>
<td>San Antonio Spurs</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>104.0</td>
<td>37.0</td>
<td>85.0</td>
<td>…</td>
<td>39.0</td>
<td>48.0</td>
<td>23.0</td>
<td>22.0</td>
<td>8.0</td>
<td>6.0</td>
<td>5.0</td>
<td>30.0</td>
<td>28.0</td>
<td>4.0</td>
</tr>
<tr>
<td>31</td>
<td>17</td>
<td>Sydney Kings</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>91.0</td>
<td>35.0</td>
<td>79.0</td>
<td>…</td>
<td>36.0</td>
<td>46.0</td>
<td>19.0</td>
<td>26.0</td>
<td>4.0</td>
<td>2.0</td>
<td>7.0</td>
<td>26.0</td>
<td>26.0</td>
<td>-19.0</td>
</tr>
<tr>
<td>32</td>
<td>17</td>
<td>Dallas Mavericks</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1.000</td>
<td>48.0</td>
<td>116.0</td>
<td>39.0</td>
<td>75.0</td>
<td>…</td>
<td>39.0</td>
<td>51.0</td>
<td>31.0</td>
<td>13.0</td>
<td>6.0</td>
<td>10.0</td>
<td>2.0</td>
<td>29.0</td>
<td>32.0</td>
<td>53.0</td>
</tr>
<tr>
<td>33</td>
<td>17</td>
<td>Melbourne United</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>48.0</td>
<td>84.0</td>
<td>31.0</td>
<td>82.0</td>
<td>…</td>
<td>29.0</td>
<td>37.0</td>
<td>15.0</td>
<td>23.0</td>
<td>10.0</td>
<td>1.0</td>
<td>9.0</td>
<td>26.0</td>
<td>19.0</td>
<td>-20.0</td>
</tr>
<tr>
<td>34</td>
<td>17</td>
<td>Washington Wizards</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>.000</td>
<td>53.0</td>
<td>121.0</td>
<td>40.0</td>
<td>97.0</td>
<td>…</td>
<td>44.0</td>
<td>57.0</td>
<td>25.0</td>
<td>24.0</td>
<td>10.0</td>
<td>7.0</td>
<td>2.0</td>
<td>39.0</td>
<td>44.0</td>
<td>-3.0</td>
</tr>
</tbody>
</table>
</div>
<pre><code>35 rows × 28 columns
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h2 id="Quiz-2"><a href="#Quiz-2" class="headerlink" title="Quiz 2"></a>Quiz 2</h2><ul>
<li>Selenium을 이용하여 네이버 IT/과학 기사의 10 페이지 까지의 최신 제목 리스트를 크롤링하세요.</li>
<li><a href="http://news.naver.com/main/main.nhn?mode=LSD&amp;mid=shm&amp;sid1=105" target="_blank" rel="noopener">http://news.naver.com/main/main.nhn?mode=LSD&amp;mid=shm&amp;sid1=105</a></li>
</ul>
<h3 id="2-1-webdriver를-실행하고-사이트에-접속하기"><a href="#2-1-webdriver를-실행하고-사이트에-접속하기" class="headerlink" title="2.1 webdriver를 실행하고 사이트에 접속하기"></a>2.1 webdriver를 실행하고 사이트에 접속하기</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_url</span><span class="params">(page=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"http://news.naver.com/main/main.nhn?mode=LSD&amp;mid=shm&amp;sid1=105#&amp;date=%2000:00:00&amp;page="</span>\</span><br><span class="line"> + str(page)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url = make_url()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(url)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-기사-제목-리스트-가져오기"><a href="#2-2-기사-제목-리스트-가져오기" class="headerlink" title="2.2 기사 제목 리스트 가져오기"></a>2.2 기사 제목 리스트 가져오기</h3><h4 id="1-1페이지에-대해-기사-제목-가져오기"><a href="#1-1페이지에-대해-기사-제목-가져오기" class="headerlink" title="(1) 1페이지에 대해 기사 제목 가져오기"></a>(1) 1페이지에 대해 기사 제목 가져오기</h4><h5 id="1페이지의-기사-리스트-가져오기"><a href="#1페이지의-기사-리스트-가져오기" class="headerlink" title="1페이지의 기사 리스트 가져오기"></a>1페이지의 기사 리스트 가져오기</h5><ul>
<li>한 페이지에 20개의 기사가 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">articles = driver.find_elements_by_css_selector(<span class="string">"#section_body &gt; ul &gt; li"</span>)</span><br><span class="line">len(articles)</span><br></pre></td></tr></table></figure>
<pre><code>20
</code></pre><h5 id="1페이지-안의-기사-제목-가져오기"><a href="#1페이지-안의-기사-제목-가져오기" class="headerlink" title="1페이지 안의 기사 제목 가져오기"></a>1페이지 안의 기사 제목 가져오기</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dict_list = []</span><br><span class="line"><span class="keyword">for</span> article <span class="keyword">in</span> articles:</span><br><span class="line">    dict_list.append(&#123;</span><br><span class="line">        <span class="string">"title"</span>: article.find_element_by_css_selector(<span class="string">"dt:nth-child(2)"</span>).text     </span><br><span class="line">    &#125;)</span><br><span class="line">df = pd.DataFrame(dict_list)</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>title</th>
</tr>
</thead>
<tbody>
<tr>
<td>15</td>
<td>이동전화 소비자불만 ‘최다’…소비자불만 1위 이통사는?</td>
</tr>
<tr>
<td>16</td>
<td>네안데르탈인, 현대인류에게 병도 주고 약도 줬다</td>
</tr>
<tr>
<td>17</td>
<td>美 컨슈머리포트 “갤노트9 배터리, 아이폰Xs 보다 우수”</td>
</tr>
<tr>
<td>18</td>
<td>LG 스마트폰 또 1천억원대 적자…적자 폭은 줄어든 듯</td>
</tr>
<tr>
<td>19</td>
<td>닌텐도, 차세대 비디오 게임기 개발</td>
</tr>
</tbody>
</table>
</div>
<h4 id="2-1-10페이지에서-기사-제목-가져오기"><a href="#2-1-10페이지에서-기사-제목-가져오기" class="headerlink" title="(2) 1-10페이지에서 기사 제목 가져오기"></a>(2) 1-10페이지에서 기사 제목 가져오기</h4><ul>
<li>2페이지와 7페이지에서 에러가 발생해서 try &amp; except 처리함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">dict_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">    driver.get(make_url(i))</span><br><span class="line">    articles = driver.find_elements_by_css_selector(<span class="string">"#section_body &gt; ul &gt; li"</span>)</span><br><span class="line">    print(len(articles))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> article <span class="keyword">in</span> articles:</span><br><span class="line">            dict_list.append(&#123;<span class="string">"title"</span>: article.find_element_by_css_selector(<span class="string">"dl &gt; dt:nth-child(2)"</span>).text&#125;)</span><br><span class="line">    <span class="keyword">except</span>: </span><br><span class="line">        print(str(i)+<span class="string">"페이지 에러 발생"</span>)</span><br><span class="line">        </span><br><span class="line">df = pd.DataFrame(dict_list)</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<pre><code>20
20
2페이지 에러 발생
20
20
20
20
20
7페이지 에러 발생
20
20
20
</code></pre><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>title</th>
</tr>
</thead>
<tbody>
<tr>
<td>163</td>
<td>iOS 12.1에서 아이폰XS 충전 문제 해결될 듯</td>
</tr>
<tr>
<td>164</td>
<td>박원순 “서울, 블록체인 중심 되게 하겠다”</td>
</tr>
<tr>
<td>165</td>
<td>[人사이트]유인상 LG CNS 단장 “스마트시티, 데이터와 시민참여가 핵심”</td>
</tr>
<tr>
<td>166</td>
<td>[와우! 과학] 여성이 남성보다 오래 사는 이유 찾았다 (연구)</td>
</tr>
<tr>
<td>167</td>
<td>“V40, 카메라 기능 역랑 집중해 고객 편의최대한 끌어올렸다”</td>
</tr>
</tbody>
</table>
</div>
<p>총 168개의 기사 제목이 크롤링됨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h4 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h4><ul>
<li>패스트캠퍼스, ⟪데이터사이언스스쿨 8기⟫ 수업자료</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-04T10:12:41.000Z">2018-10-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming-공부/">Programming 공부</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming-공부/Web-공부/">Web 공부</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    15 minutes read (About 2273 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/10/04/web_10_selenium/">Web crawling - Selenium Intermediate</a>
            
        </h1>
        <div class="content">
            <h1 id="Selenium-Intermediate"><a href="#Selenium-Intermediate" class="headerlink" title="Selenium - Intermediate"></a>Selenium - Intermediate</h1><h4 id="다룰-내용"><a href="#다룰-내용" class="headerlink" title="다룰 내용"></a>다룰 내용</h4><ol>
<li>Selenium 웹 데이터 스크래핑</li>
<li>Selenium 네이버 메일 크롤링</li>
<li>Selenium 이미지 스크린샷</li>
</ol>
<h2 id="1-Selenium-웹-데이터-스크래핑"><a href="#1-Selenium-웹-데이터-스크래핑" class="headerlink" title="1. Selenium 웹 데이터 스크래핑"></a>1. Selenium 웹 데이터 스크래핑</h2><ul>
<li>gmarket 베스트셀러 데이터 수집하기</li>
<li>gmarket best의 200개 상품의 이름/가격/할인가격/링크 가져오기</li>
</ul>
<h3 id="1-1-webdriver-실행하고-gmarket-best-페이지로-이동"><a href="#1-1-webdriver-실행하고-gmarket-best-페이지로-이동" class="headerlink" title="1.1 webdriver 실행하고 gmarket best 페이지로 이동"></a>1.1 webdriver 실행하고 gmarket best 페이지로 이동</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"http://corners.gmarket.co.kr/Bestsellers"</span></span><br><span class="line">driver = webdriver.Chrome() </span><br><span class="line">driver.get(url)</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/hyeshinoh/Study_Web/blob/master/web_09_image_001.png?raw=true" alt=""></p>
<h3 id="1-2-best-200-상품의-정보-스크래핑"><a href="#1-2-best-200-상품의-정보-스크래핑" class="headerlink" title="1.2 best 200 상품의 정보 스크래핑"></a>1.2 best 200 상품의 정보 스크래핑</h3><h4 id="200개-상품-정보-저장하기"><a href="#200개-상품-정보-저장하기" class="headerlink" title="200개 상품 정보 저장하기"></a>200개 상품 정보 저장하기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">items = driver.find_elements_by_css_selector(<span class="string">".best-list:nth-child(3) &gt; ul &gt; li"</span>)</span><br><span class="line"></span><br><span class="line">len(items)</span><br></pre></td></tr></table></figure>
<pre><code>200
</code></pre><h4 id="200개-상품의-이름-가격-할인가격-링크-pandas-dataframe으로-만들기"><a href="#200개-상품의-이름-가격-할인가격-링크-pandas-dataframe으로-만들기" class="headerlink" title="200개 상품의 이름/가격/할인가격/링크 pandas dataframe으로 만들기"></a>200개 상품의 이름/가격/할인가격/링크 pandas dataframe으로 만들기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dict_list = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    dict_list.append(&#123;</span><br><span class="line">        <span class="string">"title"</span>: item.find_element_by_css_selector(<span class="string">".itemname"</span>).text,</span><br><span class="line">        <span class="string">"s price"</span>: item.find_element_by_css_selector(<span class="string">".s-price"</span>).text.split(<span class="string">" "</span>)[<span class="number">0</span>].replace(<span class="string">","</span>,<span class="string">""</span>)[:<span class="number">-1</span>],</span><br><span class="line">        <span class="string">"o price"</span>: item.find_element_by_css_selector(<span class="string">".o-price"</span>).text.split(<span class="string">" "</span>)[<span class="number">0</span>].replace(<span class="string">","</span>,<span class="string">""</span>)[:<span class="number">-1</span>],</span><br><span class="line">        <span class="string">"link"</span>: item.find_element_by_css_selector(<span class="string">".itemname"</span>).get_attribute(<span class="string">"href"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(dict_list)</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>link</th>
<th>o price</th>
<th>s price</th>
<th>title</th>
</tr>
</thead>
<tbody>
<tr>
<td>195</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=24630" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=24630</a>…</td>
<td>22900</td>
<td>6900</td>
<td>애견패딩 겨울옷 모음/애견의류/강아지옷/애견옷</td>
</tr>
<tr>
<td>196</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=11011" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=11011</a>…</td>
<td>50000</td>
<td>32900</td>
<td>[맥심]맥심 화이트 골드 커피믹스 320T 김연아커피/모카골드</td>
</tr>
<tr>
<td>197</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=14767" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=14767</a>…</td>
<td>38400</td>
<td>32900</td>
<td>[맥심]화이트골드 320T/커피믹스/커피</td>
</tr>
<tr>
<td>198</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=17872" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=17872</a>…</td>
<td></td>
<td>69000</td>
<td>윤남텍 간편세척 초음파 다목적 가습기/YN-101/G마켓</td>
</tr>
<tr>
<td>199</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=93244" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=93244</a>…</td>
<td>26300</td>
<td>7900</td>
<td>소녀나라 10%쿠폰/맨투맨/후드티/아우터/팬츠/스커트</td>
</tr>
</tbody>
</table>
</div>
<h4 id="sale하지-않는-품목에-o-price-채우기"><a href="#sale하지-않는-품목에-o-price-채우기" class="headerlink" title="sale하지 않는 품목에 o price 채우기"></a>sale하지 않는 품목에 o price 채우기</h4><p>o price가 NaN인지(True) 아닌지 (False) is_nodata에 저장 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">is_nodata = df[<span class="string">"o price"</span>] == <span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>비어있는 o price 칸에 s price의 값을 넣기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">"s price"</span>][is_nodata] <span class="comment"># `df["s price"]`에서 is_nodata가 true인 행</span></span><br></pre></td></tr></table></figure>
<pre><code>9       13800
27      24900
30       5900
42       5900
43      14990
49      34000
59       6900
60      34000
70      39600
74       7900
75      12900
78      12900
85      25000
88      12900
101    164000
105     13800
106     10900
119     12700
124     25900
136      6400
137     12900
142     41600
143     43900
150     24900
151     23900
153     12700
164    199000
176     25580
178     47900
192     12700
198     69000
Name: s price, dtype: object
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">"o price"</span>][is_nodata] = df[<span class="string">"s price"</span>][is_nodata]</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>link</th>
<th>o price</th>
<th>s price</th>
<th>title</th>
</tr>
</thead>
<tbody>
<tr>
<td>195</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=24630" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=24630</a>…</td>
<td>22900</td>
<td>6900</td>
<td>애견패딩 겨울옷 모음/애견의류/강아지옷/애견옷</td>
</tr>
<tr>
<td>196</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=11011" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=11011</a>…</td>
<td>50000</td>
<td>32900</td>
<td>[맥심]맥심 화이트 골드 커피믹스 320T 김연아커피/모카골드</td>
</tr>
<tr>
<td>197</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=14767" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=14767</a>…</td>
<td>38400</td>
<td>32900</td>
<td>[맥심]화이트골드 320T/커피믹스/커피</td>
</tr>
<tr>
<td>198</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=17872" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=17872</a>…</td>
<td>69000</td>
<td>69000</td>
<td>윤남텍 간편세척 초음파 다목적 가습기/YN-101/G마켓</td>
</tr>
<tr>
<td>199</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=93244" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=93244</a>…</td>
<td>26300</td>
<td>7900</td>
<td>소녀나라 10%쿠폰/맨투맨/후드티/아우터/팬츠/스커트</td>
</tr>
</tbody>
</table>
</div>
<h4 id="할인율-column-추가하기"><a href="#할인율-column-추가하기" class="headerlink" title="할인율 column 추가하기"></a>할인율 column 추가하기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">"o price"</span>] = df[<span class="string">"o price"</span>].astype(<span class="string">"int"</span>)</span><br><span class="line">df[<span class="string">"s price"</span>] = df[<span class="string">"s price"</span>].astype(<span class="string">"int"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">"sale"</span>] = round((<span class="number">1</span> - (df[<span class="string">"s price"</span>] / df[<span class="string">"o price"</span>])), <span class="number">2</span>)*<span class="number">100</span></span><br><span class="line">df[<span class="string">"sale"</span>] = df[<span class="string">"sale"</span>].astype(<span class="string">"int"</span>).astype(<span class="string">"str"</span>)+<span class="string">"%"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>link</th>
<th>o price</th>
<th>s price</th>
<th>title</th>
<th>sale</th>
</tr>
</thead>
<tbody>
<tr>
<td>195</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=24630" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=24630</a>…</td>
<td>22900</td>
<td>6900</td>
<td>애견패딩 겨울옷 모음/애견의류/강아지옷/애견옷</td>
<td>70%</td>
</tr>
<tr>
<td>196</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=11011" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=11011</a>…</td>
<td>50000</td>
<td>32900</td>
<td>[맥심]맥심 화이트 골드 커피믹스 320T 김연아커피/모카골드</td>
<td>34%</td>
</tr>
<tr>
<td>197</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=14767" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=14767</a>…</td>
<td>38400</td>
<td>32900</td>
<td>[맥심]화이트골드 320T/커피믹스/커피</td>
<td>14%</td>
</tr>
<tr>
<td>198</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=17872" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=17872</a>…</td>
<td>69000</td>
<td>69000</td>
<td>윤남텍 간편세척 초음파 다목적 가습기/YN-101/G마켓</td>
<td>0%</td>
</tr>
<tr>
<td>199</td>
<td><a href="http://item.gmarket.co.kr/Item?goodscode=93244" target="_blank" rel="noopener">http://item.gmarket.co.kr/Item?goodscode=93244</a>…</td>
<td>26300</td>
<td>7900</td>
<td>소녀나라 10%쿠폰/맨투맨/후드티/아우터/팬츠/스커트</td>
<td>70%</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h2 id="2-Selenium-네이버-메일-크롤링"><a href="#2-Selenium-네이버-메일-크롤링" class="headerlink" title="2. Selenium 네이버 메일 크롤링"></a>2. Selenium 네이버 메일 크롤링</h2><ul>
<li>네이버 페이지로 이동</li>
<li>아이디 패스워드로 로그인</li>
<li>전체 메일 수, 안읽은 메일 수를 가져오기</li>
<li>메일 제목과 요약을 데이터프레임으로 만들기</li>
</ul>
<h3 id="2-1-webdriver-실행하고-naver로-이동"><a href="#2-1-webdriver-실행하고-naver로-이동" class="headerlink" title="2.1 webdriver 실행하고 naver로 이동"></a>2.1 webdriver 실행하고 naver로 이동</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">main_url = <span class="string">"http://naver.com"</span></span><br><span class="line">mail_url = <span class="string">"http://mail.naver.com"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 네이버 페이지로 이동</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(main_url)</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/hyeshinoh/Study_Web/blob/master/web_09_image_002.png?raw=true" alt=""></p>
<h3 id="2-2-네이버-로그인하기"><a href="#2-2-네이버-로그인하기" class="headerlink" title="2.2 네이버 로그인하기"></a>2.2 네이버 로그인하기</h3><h4 id="아이디-패스워드-입력"><a href="#아이디-패스워드-입력" class="headerlink" title="아이디 패스워드 입력"></a>아이디 패스워드 입력</h4><p>비밀번호는 노출해서는 안되므로 pickle 파일로 저장해서 불러오기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># with open("naver_pw.plk", "wb") as f:</span></span><br><span class="line"><span class="comment">#     pickle.dump("본인의 네이버 pw", f)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_id = <span class="string">"panda706"</span></span><br><span class="line">my_pw = pickle.load(open(<span class="string">"naver_pw.plk"</span>, <span class="string">"rb"</span>))</span><br></pre></td></tr></table></figure>
<p>로그인 버튼 클릭 &amp; 로그인 페이지로 이동</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">".lg_local_btn"</span>).click()</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/hyeshinoh/Study_Web/blob/master/web_09_image_003.png?raw=true" alt=""></p>
<p>아이디와 패스워드 넣고 로그인 버튼 클릭하기  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#id"</span>).send_keys(my_id)</span><br><span class="line">driver.find_element_by_css_selector(<span class="string">"#pw"</span>).send_keys(my_pw)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">".btn_global"</span>).click()</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/hyeshinoh/Study_Web/blob/master/web_09_image_004.png?raw=true" alt=""></p>
<h3 id="2-3-네이버-메일로-이동해서-메일-데이터-가져오기"><a href="#2-3-네이버-메일로-이동해서-메일-데이터-가져오기" class="headerlink" title="2.3 네이버 메일로 이동해서 메일 데이터 가져오기"></a>2.3 네이버 메일로 이동해서 메일 데이터 가져오기</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(mail_url)</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/hyeshinoh/Study_Web/blob/master/web_09_image_005.png?raw=true" alt=""></p>
<h4 id="전체-메일-갯수-가져오기"><a href="#전체-메일-갯수-가져오기" class="headerlink" title="전체 메일 갯수 가져오기"></a>전체 메일 갯수 가져오기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">total_mail_count = driver.find_element_by_css_selector(<span class="string">"#headTotalNum"</span>).text</span><br><span class="line">total_mail_count</span><br></pre></td></tr></table></figure>
<pre><code>&#39;110&#39;
</code></pre><h4 id="안-읽은-메일-갯수-가져오기"><a href="#안-읽은-메일-갯수-가져오기" class="headerlink" title="안 읽은 메일 갯수 가져오기"></a>안 읽은 메일 갯수 가져오기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unread_mail_count = driver.find_element_by_css_selector(<span class="string">"#headUnreadNum"</span>).text</span><br><span class="line">unread_mail_count</span><br></pre></td></tr></table></figure>
<pre><code>&#39;105&#39;
</code></pre><h4 id="메일-데이터-가져오기-제목-보낸사람-메일링크"><a href="#메일-데이터-가져오기-제목-보낸사람-메일링크" class="headerlink" title="메일 데이터 가져오기 - 제목, 보낸사람, 메일링크"></a>메일 데이터 가져오기 - 제목, 보낸사람, 메일링크</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mails = driver.find_elements_by_css_selector(<span class="string">".mailList &gt; li"</span>)</span><br><span class="line">df = pd.DataFrame(columns = [<span class="string">"제목"</span>, <span class="string">"보낸사람"</span>, <span class="string">"메일링크"</span>])</span><br><span class="line"><span class="keyword">for</span> mail <span class="keyword">in</span> mails:</span><br><span class="line">    title = mail.find_element_by_css_selector(<span class="string">".mail_title"</span>).text</span><br><span class="line">    name = mail.find_element_by_css_selector(<span class="string">".name"</span>).text</span><br><span class="line">    link = mail.find_element_by_css_selector(<span class="string">".subject &gt; a"</span>).get_attribute(<span class="string">"href"</span>)</span><br><span class="line">    df.loc[len(df)] = &#123;<span class="string">"제목"</span>:title, <span class="string">"보낸사람"</span>:name, <span class="string">"메일링크"</span>:link&#125;</span><br><span class="line">    </span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>제목</th>
<th>보낸사람</th>
<th>메일링크</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>(광고) 화려한 마케팅보다 병원의 브렌드보다 수술결과 최고의 만족을 드리겠습니다.</td>
<td>Namepr</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8404" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8404</a></td>
</tr>
<tr>
<td>1</td>
<td>(광고) 룰렛돌리고 1억만드는비법 무료로 받아보세요~</td>
<td>이벤트메일</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8403" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8403</a></td>
</tr>
<tr>
<td>2</td>
<td>(광고) 창업을 생각중이라면 추천하고 싶은 성공창업을 위한 무점포1인창업과 창업정보…</td>
<td>창업신문</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8402" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8402</a></td>
</tr>
<tr>
<td>3</td>
<td>(광고) 임플란트, 치아교정 지원자를 찾습니다~</td>
<td>이벤트메일</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8401" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8401</a></td>
</tr>
<tr>
<td>4</td>
<td>(광고) 1년안에 1억만들기 이것만 알고있으면 가능하다?~(무료정보제공)</td>
<td>이벤트메일</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8400" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8400</a></td>
</tr>
<tr>
<td>5</td>
<td>내 평생 가장 맛있는 음식</td>
<td>따뜻한하루</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8399" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8399</a></td>
</tr>
<tr>
<td>6</td>
<td>N스토어 주식회사 분할 신설에 따른 개인정보 이전 안내</td>
<td>N스토어</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8398" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8398</a></td>
</tr>
<tr>
<td>7</td>
<td>SMTP send file 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8397" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8397</a></td>
</tr>
<tr>
<td>8</td>
<td>SMTP send file 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8396" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8396</a></td>
</tr>
<tr>
<td>9</td>
<td>hyeshin의 SMTP Send Text 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8395" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8395</a></td>
</tr>
<tr>
<td>10</td>
<td>hyeshin의 SMTP Send Text 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8394" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8394</a></td>
</tr>
<tr>
<td>11</td>
<td>hyeshin의 SMTP Send Text 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8393" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8393</a></td>
</tr>
<tr>
<td>12</td>
<td>hyeshin의 SMTP Send Text 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8392" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8392</a></td>
</tr>
<tr>
<td>13</td>
<td>hyeshin의 SMTP Send Text 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8391" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8391</a></td>
</tr>
<tr>
<td>14</td>
<td>hyeshin의 SMTP Send Text 테스트</td>
<td>hyeshinoh@gmail.co..</td>
<td><a href="https://mail.naver.com/read/popup/?nMailId=8390" target="_blank" rel="noopener">https://mail.naver.com/read/popup/?nMailId=8390</a></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h2 id="3-Selenium-이미지-스크린샷"><a href="#3-Selenium-이미지-스크린샷" class="headerlink" title="3. Selenium 이미지 스크린샷"></a>3. Selenium 이미지 스크린샷</h2><ul>
<li>youtube 페이지를 이미지로 스크린샷을 만들기</li>
<li>영상 있는 부분의 위치를 파악</li>
<li>영상이 있는 부분을 pillow를 이용해서 자르기</li>
<li>영상을 저장해서 위에서 실습했던 google vision api에 넣어서 결과를 확인 </li>
</ul>
<h3 id="3-1-pillow-패키지"><a href="#3-1-pillow-패키지" class="headerlink" title="3.1 pillow 패키지"></a>3.1 pillow 패키지</h3><ul>
<li>python에서 사용하는 이미지 처리 패키지</li>
<li>설치<ul>
<li>mac: <code>$ pip3 install pillow</code></li>
<li>window: 5.1 버전은 jupyter에 문제 없음<ul>
<li><code>$ conda install -c anaconda pillow</code></li>
<li><code>$ conda uninstall pillow</code></li>
<li><code>$ conda install -c conda-forge pillow</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image <span class="keyword">as</span> pil</span><br><span class="line"><span class="keyword">import</span> time</span><br></pre></td></tr></table></figure>
<h3 id="3-2-webdriver-실행하고-youtube-영상-스크린샷-저장"><a href="#3-2-webdriver-실행하고-youtube-영상-스크린샷-저장" class="headerlink" title="3.2 webdriver 실행하고 youtube 영상 스크린샷 저장"></a>3.2 webdriver 실행하고 youtube 영상 스크린샷 저장</h3><p>스크린샷을 저장할 “WWDC 2018 Keynote - Apple” 영상의 url을 저장</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"https://www.youtube.com/watch?v=UThGcWBIMpU&amp;t=500s"</span></span><br></pre></td></tr></table></figure>
<p>webdriver 실행하고 영상 실행 화면을 스크린샷</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(url)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">driver.save_screenshot(<span class="string">"screenshot.png"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    driver.save_screenshot(<span class="string">"screenshot"</span> + str(idx) + <span class="string">".png"</span>)</span><br></pre></td></tr></table></figure>
<pre><code>True
</code></pre><h3 id="3-3-스크린샷-이미지-편집"><a href="#3-3-스크린샷-이미지-편집" class="headerlink" title="3.3 스크린샷 이미지 편집"></a>3.3 스크린샷 이미지 편집</h3><h4 id="저장한-스크린샷-이미지-확인"><a href="#저장한-스크린샷-이미지-확인" class="headerlink" title="저장한 스크린샷 이미지 확인"></a>저장한 스크린샷 이미지 확인</h4><p>스크린샷을 뜬 이미지는 아래와 같이 브라우저 전체를 담고 있음</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pil_im = pil.open(<span class="string">"screenshot.png"</span>)</span><br><span class="line">print(pil_im.size)</span><br><span class="line">pil_im</span><br></pre></td></tr></table></figure>
<pre><code>(2400, 1290)
</code></pre><img src="/2018/10/04/web_10_selenium/output_60_1.png">
<h4 id="영상이-나오는-영역만-자르기"><a href="#영상이-나오는-영역만-자르기" class="headerlink" title="영상이 나오는 영역만 자르기"></a>영상이 나오는 영역만 자르기</h4><p>영상이 재생되는 영역의 시작점과 크기를 구하기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">element = driver.find_element_by_css_selector(<span class="string">"#player-container"</span>)</span><br><span class="line">location = element.location</span><br><span class="line">size = element.size</span><br><span class="line">location, size</span><br></pre></td></tr></table></figure>
<pre><code>({&#39;x&#39;: 24, &#39;y&#39;: 80}, {&#39;height&#39;: 408, &#39;width&#39;: 726})
</code></pre><p>이미지 잘라내기</p>
<ul>
<li>top, bottom, left, right를 구해서 잘라낼 area 지정<br>(retina display의 경우: 각각 곱하기 2)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">left = location[<span class="string">"x"</span>]*<span class="number">2</span></span><br><span class="line">top = location [<span class="string">"y"</span>]*<span class="number">2</span></span><br><span class="line">right = left + size[<span class="string">"width"</span>]*<span class="number">2</span></span><br><span class="line">bottom = top + size[<span class="string">"height"</span>]*<span class="number">2</span></span><br><span class="line">area = (left, top, right, bottom)</span><br><span class="line">area</span><br></pre></td></tr></table></figure>
<pre><code>(48, 160, 1500, 976)
</code></pre><p>이미지 잘라내기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pil_im = pil_im.crop(area)</span><br><span class="line">pil_im.save(<span class="string">"screenshot_element.png"</span>)</span><br></pre></td></tr></table></figure>
<p>잘라낸 결과 이미지</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pil_im = pil.open(<span class="string">"screenshot_element.png"</span>)</span><br><span class="line">pil_im</span><br></pre></td></tr></table></figure>
<img src="/2018/10/04/web_10_selenium/output_69_0.png">
<p>잘라낸 부분에서 하단의 메뉴바 부분까지 잘라내기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">element = driver.find_element_by_css_selector(<span class="string">".ytp-chrome-bottom"</span>)</span><br><span class="line">playbar_height = element.size[<span class="string">"height"</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">left = location[<span class="string">"x"</span>] * <span class="number">2</span></span><br><span class="line">top = location [<span class="string">"y"</span>] * <span class="number">2</span></span><br><span class="line">right = left + size[<span class="string">"width"</span>] * <span class="number">2</span></span><br><span class="line">bottom = top + size[<span class="string">"height"</span>] *<span class="number">2</span> - playbar_height *<span class="number">2</span></span><br><span class="line">area = (left, top, right, bottom)</span><br><span class="line">area</span><br></pre></td></tr></table></figure>
<pre><code>(48, 160, 1500, 898)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pil_im = pil.open(<span class="string">"screenshot.png"</span>)</span><br><span class="line">pil_im = pil_im.crop(area)</span><br><span class="line">pil_im.save(<span class="string">"screenshot_element2.png"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pil_im = pil.open(<span class="string">"screenshot_element2.png"</span>)</span><br><span class="line">pil_im</span><br></pre></td></tr></table></figure>
<img src="/2018/10/04/web_10_selenium/output_74_0.png">
<h4 id="썸네일로-만들기"><a href="#썸네일로-만들기" class="headerlink" title="썸네일로 만들기"></a>썸네일로 만들기</h4><ul>
<li>서비스할 때 작은 사이즈의 썸네일을 만들어서 씀으로써 트래픽 비용 절감</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pil_im.size</span><br></pre></td></tr></table></figure>
<pre><code>(1452, 738)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pil_im.thumbnail((<span class="number">320</span>,<span class="number">160</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h4 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h4><ul>
<li>패스트캠퍼스, ⟪데이터사이언스스쿨 8기⟫ 수업자료</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-02T14:52:26.000Z">2018-10-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming-공부/">Programming 공부</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming-공부/Web-공부/">Web 공부</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 minutes read (About 1383 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/10/02/web_09_selenium/">Web crawling - Selenium Basic</a>
            
        </h1>
        <div class="content">
            <h4 id="다룰-내용"><a href="#다룰-내용" class="headerlink" title="다룰 내용"></a>다룰 내용</h4><ol>
<li>Selenium이란</li>
<li>Selenium 설치</li>
<li>Selenium 기본 사용법</li>
<li>Selenium 파일 업로드</li>
</ol>
<h2 id="1-Selenium이란"><a href="#1-Selenium이란" class="headerlink" title="1. Selenium이란"></a>1. Selenium이란</h2><ul>
<li>Selenium documentation (<a href="http://www.seleniumhq.org/" target="_blank" rel="noopener">http://www.seleniumhq.org/</a>) </li>
<li>웹 서비스를 테스트 하기 위해 만들어진 브라우저 자동화 라이브러리 (다른 목적으로도 사용할 수 있음)</li>
<li>동적인 웹페이지 크롤링에 이용</li>
<li>여러가지 브라우저를 지원하지만 Firefox는 최신 버전 지원 X하는 등 문제가 있을 수도 <ul>
<li>우리는 가장 많이 사용하는 Chrome driver 사용</li>
</ul>
</li>
<li>여러가지 OS, 다른 언어에서도 사용 가능</li>
</ul>
<h2 id="2-Selenium-설치"><a href="#2-Selenium-설치" class="headerlink" title="2. Selenium 설치"></a>2. Selenium 설치</h2><h3 id="2-1-Install-chrome-driver"><a href="#2-1-Install-chrome-driver" class="headerlink" title="2.1 Install chrome driver"></a>2.1 Install chrome driver</h3><ul>
<li><a href="https://sites.google.com/a/chromium.org/chromedriver/home" target="_blank" rel="noopener">다운로드 링크</a> ← 여기에서 다운로드</li>
<li>Mac: chrome driver를 글로벌하게 사용하기 위해 경로 변경 <ul>
<li><code>$ mv ~/Donwloads/chromedriver /usr/local/bin</code></li>
</ul>
</li>
<li>Windows: 환경변수 추가</li>
<li>환경변수 설정이 잘 되지 않을 때는 같은 폴더에 chromedriver.exe를 넣거나 코드에 path를 넣어주면 됨</li>
</ul>
<h3 id="2-2-Install-selenium"><a href="#2-2-Install-selenium" class="headerlink" title="2.2 Install selenium"></a>2.2 Install selenium</h3><ul>
<li>Mac: <code>$ sudo pip3 install selenium</code></li>
<li>Windows: <code>$ conda install -c conda-forge selenium</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br></pre></td></tr></table></figure>
<h2 id="3-Selenium-기본-사용법"><a href="#3-Selenium-기본-사용법" class="headerlink" title="3. Selenium 기본 사용법"></a>3. Selenium 기본 사용법</h2><h3 id="3-1-브라우저-open"><a href="#3-1-브라우저-open" class="headerlink" title="3.1 브라우저 open"></a>3.1 브라우저 open</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()     <span class="comment"># 객체를 만들어서 driver에 넣어줌</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-페이지-이동"><a href="#3-2-페이지-이동" class="headerlink" title="3.2 페이지 이동"></a>3.2 페이지 이동</h3><ul>
<li>url에 꼭 http를 포함해야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"http://naver.com"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-3-window-size-조절"><a href="#3-3-window-size-조절" class="headerlink" title="3.3 window size 조절"></a>3.3 window size 조절</h3><ul>
<li>반응형 웹페이지 테스트에 이용할 수 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.set_window_size(<span class="number">600</span>, <span class="number">800</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-4-브라우저-스크롤-조절"><a href="#3-4-브라우저-스크롤-조절" class="headerlink" title="3.4 브라우저 스크롤 조절"></a>3.4 브라우저 스크롤 조절</h3><ul>
<li>함수가 없는 경우에는 javascript 코드를 실행해서 컨트롤</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"window.scrollTo(200,300);"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<h3 id="3-5-윈도우-객체-저장"><a href="#3-5-윈도우-객체-저장" class="headerlink" title="3.5 윈도우 객체 저장"></a>3.5 윈도우 객체 저장</h3><ul>
<li>윈도우 객체를 저장하면 브라우저에 여러 개의 탭이 있을 때 저장되어 있는 윈도우 객체의 탭으로 돌아올 수 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">main_window = driver.current_window_handle</span><br><span class="line">main_window</span><br></pre></td></tr></table></figure>
<pre><code>&#39;CDwindow-1327F53EB33E1BF8CD1ECD3C85E4B347&#39;
</code></pre><h3 id="3-6-새로운-윈도우-탭-열기"><a href="#3-6-새로운-윈도우-탭-열기" class="headerlink" title="3.6 새로운 윈도우 탭 열기"></a>3.6 새로운 윈도우 탭 열기</h3><p>javascript 코드로 새로운 탭을 열 수 있음</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"window.open('http://google.com');"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<p>새로운 탭을 열었지만 아래와 같이 current_window(포커스)가 자동으로 바뀌지는 않음</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.current_window_handle</span><br></pre></td></tr></table></figure>
<pre><code>&#39;CDwindow-1327F53EB33E1BF8CD1ECD3C85E4B347&#39;
</code></pre><h3 id="3-7-현재-열려있는-윈도우-객체-확인"><a href="#3-7-현재-열려있는-윈도우-객체-확인" class="headerlink" title="3.7 현재 열려있는 윈도우 객체 확인"></a>3.7 현재 열려있는 윈도우 객체 확인</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">windows = driver.window_handles</span><br><span class="line">windows</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;CDwindow-1327F53EB33E1BF8CD1ECD3C85E4B347&#39;,
 &#39;CDwindow-D8D228E9A26224583A54A676F95612EA&#39;]
</code></pre><h3 id="3-8-윈도우-포커스-변경"><a href="#3-8-윈도우-포커스-변경" class="headerlink" title="3.8 윈도우 포커스 변경"></a>3.8 윈도우 포커스 변경</h3><ul>
<li>current window가 자동으로 바뀌지 않았기 때문에 바꿔주기</li>
<li>이 방법으로 탭을 이동하면서 작업할 수 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to_window(windows[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.current_window_handle</span><br></pre></td></tr></table></figure>
<pre><code>&#39;CDwindow-D8D228E9A26224583A54A676F95612EA&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to_window(main_window)</span><br></pre></td></tr></table></figure>
<h3 id="3-9-페이지-새로고침"><a href="#3-9-페이지-새로고침" class="headerlink" title="3.9 페이지 새로고침"></a>3.9 페이지 새로고침</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"location.reload();"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<h3 id="3-10-alert-messege-처리"><a href="#3-10-alert-messege-처리" class="headerlink" title="3.10 alert messege 처리"></a>3.10 alert messege 처리</h3><p>alert messege 만들기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"alert('selenium test');"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<p>switch_to_alert 함수로 alert 변수에 alert 객체를 저장할 수 있음<br>alert 객의 text 값을 확인해보면 alert의 메세지를 문자열로 확인 가능</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert = driver.switch_to_alert()</span><br><span class="line">alert.text</span><br></pre></td></tr></table></figure>
<pre><code>&#39;selenium test&#39;
</code></pre><p>확인 버튼 누르기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert.accept()</span><br></pre></td></tr></table></figure>
<h3 id="3-11-confirm-처리"><a href="#3-11-confirm-처리" class="headerlink" title="3.11 confirm 처리"></a>3.11 confirm 처리</h3><ul>
<li>confirm은 alert과 달리 확인/취소 버튼이 함께 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"confirm('data')"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">confirm = driver.switch_to_alert()</span><br><span class="line">confirm.text</span><br></pre></td></tr></table></figure>
<pre><code>&#39;data&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># confirm.accept()   # 확인 버튼 클릭</span></span><br><span class="line">confirm.dismiss()    <span class="comment"># 취소 버튼 클릭</span></span><br></pre></td></tr></table></figure>
<h3 id="3-12-input창에-문자열-입력하기"><a href="#3-12-input창에-문자열-입력하기" class="headerlink" title="3.12 input창에 문자열 입력하기"></a>3.12 input창에 문자열 입력하기</h3><ul>
<li>send_keys()를 이용하여 웹페이지의 input 태그에 문자열을 입력할 수 있음</li>
<li>find_element_by_css_selector<ul>
<li>html 코드의 태그 위치에 접근하는 함수</li>
<li>파라미터로 css selector를 넣어주면 해당 selector의 태그 위치로 접근</li>
</ul>
</li>
</ul>
<p>네이버 검색창에 “데이터사이언스” 입력하기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#query"</span>).send_keys(<span class="string">"데이터사이언스"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-13-버튼-클릭하기-click-event-발생"><a href="#3-13-버튼-클릭하기-click-event-발생" class="headerlink" title="3.13 버튼 클릭하기 (click event 발생)"></a>3.13 버튼 클릭하기 (click event 발생)</h3><p>검색 버튼 눌러 “데이터사이언스” 검색 결과 확인하기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#search_btn"</span>).click()</span><br></pre></td></tr></table></figure>
<h3 id="3-14-끝내기"><a href="#3-14-끝내기" class="headerlink" title="3.14 끝내기"></a>3.14 끝내기</h3><h4 id="창-닫기-하나의-윈도우-창을-닫음"><a href="#창-닫기-하나의-윈도우-창을-닫음" class="headerlink" title="창 닫기 - 하나의 윈도우 창을 닫음"></a>창 닫기 - 하나의 윈도우 창을 닫음</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.close()</span><br></pre></td></tr></table></figure>
<h4 id="브라우저-닫기"><a href="#브라우저-닫기" class="headerlink" title="브라우저 닫기"></a>브라우저 닫기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h2 id="4-Selenium-파일-업로드"><a href="#4-Selenium-파일-업로드" class="headerlink" title="4. Selenium 파일 업로드"></a>4. Selenium 파일 업로드</h2><ul>
<li>google vision api 페이지에 이미지 파일을 업로드</li>
<li>iframe으로 이동</li>
</ul>
<h3 id="4-1-webdriver-실행하고-google-vision-api로-이동"><a href="#4-1-webdriver-실행하고-google-vision-api로-이동" class="headerlink" title="4.1 webdriver 실행하고 google vision api로 이동"></a>4.1 webdriver 실행하고 google vision api로 이동</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"https://cloud.google.com/vision/"</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(url)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.set_window_size(<span class="number">800</span>, <span class="number">800</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script = <span class="string">"window.scrollTo(0,1200);"</span></span><br><span class="line">driver.execute_script(script)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-iframe으로-포커스-이동"><a href="#4-2-iframe으로-포커스-이동" class="headerlink" title="4.2 iframe으로 포커스 이동"></a>4.2 iframe으로 포커스 이동</h3><ul>
<li>iframe 안에 있는 내용을 crawling하기 위해서는 꼭 iframe으로 focus switch!</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iframe = driver.find_element_by_css_selector(<span class="string">'#vision_demo_section &gt; iframe'</span>)</span><br><span class="line">driver.switch_to_frame(iframe)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## iframe에서 메인 프레임으로 돌아가기</span></span><br><span class="line"><span class="comment"># driver.switch_to_default_content()</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-파일-업로드"><a href="#4-3-파일-업로드" class="headerlink" title="4.3 파일 업로드"></a>4.3 파일 업로드</h3><ul>
<li>절대경로로 작성해야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_path = <span class="string">"/Users/hyeshinoh/Workspace/Study_Web/dog.png"</span></span><br><span class="line">driver.find_element_by_css_selector(<span class="string">'#input'</span>).send_keys(file_path)</span><br></pre></td></tr></table></figure>
<h3 id="4-4-분석-결과-확인"><a href="#4-4-분석-결과-확인" class="headerlink" title="4.4 분석 결과 확인"></a>4.4 분석 결과 확인</h3><h4 id="1-Web-결과-가져오기"><a href="#1-Web-결과-가져오기" class="headerlink" title="(1) Web 결과 가져오기"></a>(1) Web 결과 가져오기</h4><p>이미지 분석 결과에서 Web 탭을 선택</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">'#webDetection'</span>).click()</span><br></pre></td></tr></table></figure>
<p>분석 결과를 가져오기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">web_results = driver.find_elements_by_css_selector(<span class="string">'#card &gt; .container &gt; .row'</span>)[:<span class="number">15</span>]</span><br><span class="line"><span class="keyword">for</span> web_result <span class="keyword">in</span> web_results:</span><br><span class="line">    print(</span><br><span class="line">        web_result.find_element_by_css_selector(<span class="string">".name"</span>).text,</span><br><span class="line">        web_result.find_element_by_css_selector(<span class="string">".score"</span>).text</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<pre><code>Puppy 1.31475
French Bulldog 0.93836
Bulldog 0.74869
Shih Tzu 0.59496
Beagle 0.58407
Yorkshire Terrier 0.53742
Dog training 0.5303
 0.5142
Pet 0.4853
Dog breed 0.3965
stock.xchng 0.3691
Dog breeding 0.3677
Training 0.3125
Cuteness 0.3003
Dog 0
</code></pre><h4 id="2-Document-결과-사진-속-text-가져오기"><a href="#2-Document-결과-사진-속-text-가져오기" class="headerlink" title="(2) Document 결과 (사진 속 text) 가져오기"></a>(2) Document 결과 (사진 속 text) 가져오기</h4><p>이미지 분석 결과에서 Document 탭을 선택</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">"#fullTextAnnotation"</span>).click()</span><br></pre></td></tr></table></figure>
<p>text 데이터를 가져오기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document_results = driver.find_elements_by_css_selector(<span class="string">"#card &gt; fieldset &gt; div &gt; fieldset"</span>)</span><br><span class="line">len(document_results)</span><br></pre></td></tr></table></figure>
<pre><code>2
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">documents = []</span><br><span class="line"><span class="keyword">for</span> document_result <span class="keyword">in</span> document_results:</span><br><span class="line">    words = document_result.find_elements_by_css_selector(<span class="string">".container .word"</span>)</span><br><span class="line">    print(len(words))</span><br><span class="line">    sentence_list = []</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">        word = word.text.replace(<span class="string">" "</span>, <span class="string">""</span>)</span><br><span class="line">        sentence_list.append(word)</span><br><span class="line">    documents.append(<span class="string">" "</span>.join(sentence_list))</span><br><span class="line">documents</span><br></pre></td></tr></table></figure>
<pre><code>4
6

[&#39;In the dog house&#39;, &quot;&#39; 인기를 잃다 , 면목을 잃다&quot;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>
<h4 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h4><ul>
<li>패스트캠퍼스, ⟪데이터사이언스스쿨 8기⟫ 수업자료</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-09-29T13:52:26.000Z">2018-09-29</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming-공부/">Programming 공부</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming-공부/Web-공부/">Web 공부</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    12 minutes read (About 1805 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/09/29/web_08_requests/">Web crawling - Requests</a>
            
        </h1>
        <div class="content">
            <h1 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a>Requests</h1><ul>
<li>requests: 서버에 request 요청을 하고 response를 받는 패키지</li>
<li><a href="http://docs.python-requests.org/en/master/" target="_blank" rel="noopener">http://docs.python-requests.org/en/master/</a></li>
<li>mac은 설치 필요: <code>pip3 install requests</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> pickle</span><br></pre></td></tr></table></figure>
<h2 id="1-네이버-주식-데이터-가져오기"><a href="#1-네이버-주식-데이터-가져오기" class="headerlink" title="1. 네이버 주식 데이터 가져오기"></a>1. 네이버 주식 데이터 가져오기</h2><ul>
<li>api를 사용해 json 파싱</li>
<li>네이버 주식 페이지(모바일)에서 주식 데이터를 가져와 pandas dataframe으로 만들기</li>
<li><a href="http://m.stock.naver.com" target="_blank" rel="noopener">http://m.stock.naver.com</a></li>
<li>증권-국내-코스피: <a href="http://m.stock.naver.com/sise/siseList.nhn?menu=market_sum&amp;sosok=0" target="_blank" rel="noopener">http://m.stock.naver.com/sise/siseList.nhn?menu=market_sum&amp;sosok=0</a></li>
<li>개발자도구에서 request url을 복사해오기<ul>
<li><a href="https://m.stock.naver.com/api/json/sise/siseListJson.nhn?menu=market_sum&amp;sosok=0&amp;pageSize=20&amp;page=2" target="_blank" rel="noopener">https://m.stock.naver.com/api/json/sise/siseListJson.nhn?menu=market_sum&amp;sosok=0&amp;pageSize=20&amp;page=2</a></li>
</ul>
</li>
</ul>
<h3 id="1-1-make-url-함수"><a href="#1-1-make-url-함수" class="headerlink" title="1.1 make_url 함수"></a>1.1 make_url 함수</h3><ul>
<li>page_size와 page를 parameter로 받아 url을 만드는 함수</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_url</span><span class="params">(page_size=<span class="number">10</span>, page=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"http://m.stock.naver.com/api/json/sise/siseListJson.nhn?\</span></span><br><span class="line"><span class="string">menu=market_sum&amp;sosok=0&amp;pageSize="</span>+str(page_size)+<span class="string">"&amp;page="</span>+str(page)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">make_url()</span><br></pre></td></tr></table></figure>
<pre><code>&#39;http://m.stock.naver.com/api/json/sise/siseListJson.nhn?menu=market_sum&amp;sosok=0&amp;pageSize=10&amp;page=1&#39;
</code></pre><h3 id="1-2-get-data-함수"><a href="#1-2-get-data-함수" class="headerlink" title="1.2 get_data 함수"></a>1.2 get_data 함수</h3><ul>
<li>url을 parameter로 받아 pandas dataframe으로 만들어주는 함수</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    URL을 받으면 json으로 데이터를 가져와서 pandas dataframe 로 만들어주는 함수</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    response = requests.get(url)   <span class="comment"># response라는 obj. 안에 결과 데이터를 받아옴</span></span><br><span class="line">    json_info = response.json()    <span class="comment"># json함수: 문자열 데이터를 json 형태로 parsing</span></span><br><span class="line">    companies = json_info[<span class="string">"result"</span>][<span class="string">"itemList"</span>]</span><br><span class="line">    df = pd.DataFrame(columns = [<span class="string">"종목"</span>,<span class="string">"시세"</span>,<span class="string">"전일비"</span>,<span class="string">"등락율"</span>,<span class="string">"시가총액"</span>,<span class="string">"거래량"</span>])</span><br><span class="line">    <span class="keyword">for</span> company <span class="keyword">in</span> companies:</span><br><span class="line">        df.loc[len(df)] = &#123;</span><br><span class="line">            <span class="string">"종목"</span>:company[<span class="string">"nm"</span>],</span><br><span class="line">            <span class="string">"시세"</span>:company[<span class="string">"nv"</span>],</span><br><span class="line">            <span class="string">"전일비"</span>:company[<span class="string">"cv"</span>],</span><br><span class="line">            <span class="string">"등락율"</span>:company[<span class="string">"cr"</span>],</span><br><span class="line">            <span class="string">"시가총액"</span>:company[<span class="string">"mks"</span>],</span><br><span class="line">            <span class="string">"거래량"</span>:company[<span class="string">"aq"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> df</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = make_url(<span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">df = get_data(url)</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>종목</th>
<th>시세</th>
<th>전일비</th>
<th>등락율</th>
<th>시가총액</th>
<th>거래량</th>
</tr>
</thead>
<tbody>
<tr>
<td>95</td>
<td>KODEX 레버리지</td>
<td>14885</td>
<td>-170</td>
<td>-1.13</td>
<td>27120</td>
<td>5641593</td>
</tr>
<tr>
<td>96</td>
<td>대한항공</td>
<td>28100</td>
<td>0</td>
<td>0.00</td>
<td>26651</td>
<td>385938</td>
</tr>
<tr>
<td>97</td>
<td>TIGER 200</td>
<td>30135</td>
<td>-175</td>
<td>-0.58</td>
<td>26428</td>
<td>861828</td>
</tr>
<tr>
<td>98</td>
<td>OCI</td>
<td>110000</td>
<td>3000</td>
<td>2.80</td>
<td>26234</td>
<td>156276</td>
</tr>
<tr>
<td>99</td>
<td>두산</td>
<td>136500</td>
<td>-1500</td>
<td>-1.09</td>
<td>26205</td>
<td>54640</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-3-json-normalize"><a href="#1-3-json-normalize" class="headerlink" title="1.3 json_normalize"></a>1.3 json_normalize</h3><ul>
<li>더 편하게 json format 데이터를 pandas dataframe에 넣어주는 방법</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas.io.json <span class="keyword">import</span> json_normalize</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data</span><span class="params">(url)</span>:</span></span><br><span class="line">    </span><br><span class="line">    response = requests.get(url)</span><br><span class="line">    json_info = response.json()    <span class="comment"># parsing</span></span><br><span class="line">    companies = json_info[<span class="string">"result"</span>][<span class="string">"itemList"</span>]</span><br><span class="line">    <span class="keyword">return</span> json_normalize(companies)</span><br><span class="line"></span><br><span class="line">url = make_url(<span class="number">100</span>, <span class="number">2</span>)</span><br><span class="line">df = get_data(url)</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>aa</th>
<th>aq</th>
<th>cd</th>
<th>cr</th>
<th>cv</th>
<th>mks</th>
<th>mt</th>
<th>nm</th>
<th>nv</th>
<th>pcv</th>
<th>rf</th>
</tr>
</thead>
<tbody>
<tr>
<td>95</td>
<td>645</td>
<td>38116</td>
<td>005690</td>
<td>-0.59</td>
<td>-100</td>
<td>10086</td>
<td>0</td>
<td>파미셀</td>
<td>16850</td>
<td>16950</td>
<td>5</td>
</tr>
<tr>
<td>96</td>
<td>420</td>
<td>9161</td>
<td>079550</td>
<td>-1.83</td>
<td>-850</td>
<td>10054</td>
<td>0</td>
<td>LIG넥스원</td>
<td>45700</td>
<td>46550</td>
<td>5</td>
</tr>
<tr>
<td>97</td>
<td>62</td>
<td>1383</td>
<td>226320</td>
<td>0.88</td>
<td>400</td>
<td>10011</td>
<td>0</td>
<td>잇츠한불</td>
<td>45650</td>
<td>45250</td>
<td>2</td>
</tr>
<tr>
<td>98</td>
<td>6966</td>
<td>72049</td>
<td>001820</td>
<td>2.02</td>
<td>1900</td>
<td>9969</td>
<td>0</td>
<td>삼화콘덴서</td>
<td>95900</td>
<td>94000</td>
<td>2</td>
</tr>
<tr>
<td>99</td>
<td>129</td>
<td>4536</td>
<td>001680</td>
<td>-0.18</td>
<td>-50</td>
<td>9875</td>
<td>0</td>
<td>대상</td>
<td>28500</td>
<td>28550</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-공식적으로-제공되는-API-사용하기-Dark-Sky-API"><a href="#2-공식적으로-제공되는-API-사용하기-Dark-Sky-API" class="headerlink" title="2. 공식적으로 제공되는 API 사용하기 - Dark Sky API"></a>2. 공식적으로 제공되는 API 사용하기 - Dark Sky API</h2><ul>
<li><p>날씨 정보를 알려주는 api - <a href="https://darksky.net/dev" target="_blank" rel="noopener">https://darksky.net/dev</a></p>
<ul>
<li>회원가입 필요, 하루에 1000건까지 무료로 사용 가능</li>
<li>사용법(<a href="https://darksky.net/dev/docs" target="_blank" rel="noopener">Docs</a>)<ul>
<li>Forecast Request: <a href="https://api.darksky.net/forecast/[key]/[latitude],[longitude" target="_blank" rel="noopener">https://api.darksky.net/forecast/[key]/[latitude],[longitude</a>]</li>
<li>[key]: 회원가입시 부여받은 secret key 사용<ul>
<li>요청할 때 token 값을 같이 query에 보내주어 API를 요청하는 사람이 누구인지 서비스 제공자가 판별</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>mac 설치: <code>pip3 install python-forecastio</code></p>
</li>
<li>window 설치: <ul>
<li><code>conda install -c auto python-forecastio</code></li>
<li><code>conda install -c anaconda python-forecastio</code></li>
<li><code>conda install -c conda-forge python-forecastio</code> </li>
<li><code>pip3 install python-forecastio</code></li>
</ul>
</li>
</ul>
<h3 id="2-1-Preparation"><a href="#2-1-Preparation" class="headerlink" title="2.1 Preparation"></a>2.1 Preparation</h3><ul>
<li>import package &amp; set request url</li>
<li>secret key(토큰)는 유출되어서는 안되니 pickle file로 저장해 이용</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> forecastio</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FORECAST_TOKEN = "본인이 발급받은 토큰"</span></span><br><span class="line"><span class="comment"># pickle.dump(FORECAST_TOKEN, open("FORECAST_TOKEN.pickle", 'wb'))</span></span><br><span class="line">FORECAST_TOKEN = pickle.load(open(<span class="string">'FORECAST_TOKEN.pickle'</span>, <span class="string">'rb'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="2-2-forecast-함수-사용"><a href="#2-2-forecast-함수-사용" class="headerlink" title="2.2 forecast 함수 사용"></a>2.2 forecast 함수 사용</h3><ul>
<li>위도와 경도를 parameter로 받는 forecast 함수 생성</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forecast</span><span class="params">(lat, lng)</span>:</span></span><br><span class="line">    url = <span class="string">"https://api.darksky.net/forecast/&#123;&#125;/&#123;&#125;,&#123;&#125;"</span>.format(FORECAST_TOKEN, lat, lng)</span><br><span class="line">    response = requests.get(url)</span><br><span class="line">    json_info = response.json()</span><br><span class="line">    <span class="keyword">return</span> json_info[<span class="string">"hourly"</span>][<span class="string">"summary"</span>], json_info[<span class="string">"timezone"</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lat = <span class="number">37.512</span></span><br><span class="line">lng = <span class="number">126.954</span></span><br><span class="line">forecast(lat, lng)</span><br></pre></td></tr></table></figure>
<pre><code>(&#39;Partly cloudy tomorrow afternoon.&#39;, &#39;Asia/Seoul&#39;)
</code></pre><h3 id="2-3-forecastio-패키지-사용"><a href="#2-3-forecastio-패키지-사용" class="headerlink" title="2.3 forecastio 패키지 사용"></a>2.3 forecastio 패키지 사용</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forecast2</span><span class="params">(lat, lng)</span>:</span></span><br><span class="line">    forecast = forecastio.load_forecast(FORECAST_TOKEN, lat, lng, lang = <span class="string">'ko'</span>)</span><br><span class="line">    byHour = forecast.hourly()</span><br><span class="line">    <span class="keyword">return</span> byHour.summary</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lat = <span class="number">37.512</span></span><br><span class="line">lng = <span class="number">126.954</span></span><br><span class="line">forecast2(lat, lng)</span><br></pre></td></tr></table></figure>
<pre><code>&#39;내일 오후동안 약간 흐림&#39;
</code></pre><h2 id="3-BeautifulSoup"><a href="#3-BeautifulSoup" class="headerlink" title="3. BeautifulSoup"></a>3. BeautifulSoup</h2><ul>
<li>BeautifulSoup Doc (<a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" target="_blank" rel="noopener">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a>)</li>
<li>문자열로 되어있는 html 코드를 css selector나 xpath를 이용해서 특정 element의 데이터를 쉽게 가져올 수 있도록 하는 서비스 패키지</li>
<li>설치: <code>pip3 install bs4</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br></pre></td></tr></table></figure>
<h3 id="3-1-네이버-검색어-순위-크롤링"><a href="#3-1-네이버-검색어-순위-크롤링" class="headerlink" title="3.1 네이버 검색어 순위 크롤링"></a>3.1 네이버 검색어 순위 크롤링</h3><ul>
<li>bs4 사용 : html을 특정 element를 CSS selector로 select할 수 있는 객체로 parsing</li>
<li>네이버 검색어 순위를 가져와 데이터 프레임으로 만들기</li>
<li><a href="http://naver.com" target="_blank" rel="noopener">http://naver.com</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">naver_top20</span><span class="params">()</span>:</span></span><br><span class="line">    df = pd.DataFrame(columns=[<span class="string">"rank"</span>,<span class="string">"keyword"</span>])</span><br><span class="line">    response = requests.get(<span class="string">"http://naver.com"</span>)</span><br><span class="line">    dom = BeautifulSoup(response.content, <span class="string">"html.parser"</span>)   <span class="comment">#html.parser   # dom 객체</span></span><br><span class="line">    keywords = dom.select(<span class="string">".ah_roll .ah_l .ah_item"</span>)   </span><br><span class="line">        <span class="comment"># CSS selector - selecting하는 방법은 다양</span></span><br><span class="line">        <span class="comment"># select 쓰면 list로 리턴 (요소가 하나라도) | select_one은 하나의 element만 리턴</span></span><br><span class="line">        <span class="comment"># len()을 찍어봐서 갯수가 맞게 나오는지 확인할 것</span></span><br><span class="line">    <span class="comment"># keywords = dom.select(".ah_roll_area &gt; .ah_l &gt; .ah_item")  </span></span><br><span class="line">    <span class="keyword">for</span> keyword <span class="keyword">in</span> keywords:</span><br><span class="line">        df.loc[len(df)] = &#123;</span><br><span class="line">            <span class="string">"rank"</span>: keyword.select_one(<span class="string">".ah_r"</span>).text,       </span><br><span class="line">            <span class="string">"keyword"</span>: keyword.select_one(<span class="string">".ah_k"</span>).text,</span><br><span class="line">            <span class="comment"># .text - element 안의 시작태그와 끝 태그 사이 내용을 가져옴</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> df</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = naver_top20()</span><br><span class="line">df.tail()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>rank</th>
<th>keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td>15</td>
<td>16</td>
<td>박미선</td>
</tr>
<tr>
<td>16</td>
<td>17</td>
<td>하나뿐인 내편</td>
</tr>
<tr>
<td>17</td>
<td>18</td>
<td>중국 샤먼 여행</td>
</tr>
<tr>
<td>18</td>
<td>19</td>
<td>그녀로 말할 것 같으면</td>
</tr>
<tr>
<td>19</td>
<td>20</td>
<td>토익</td>
</tr>
</tbody>
</table>
</div>
<p>10초마다 실시간 검색어를 크롤링해서 리스트로 저장하기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">ls = []</span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">    print(idx)</span><br><span class="line">    df = naver_top20()</span><br><span class="line">    ls.append(df)</span><br><span class="line">    time.sleep(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<pre><code>0
1
2
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls[<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>rank</th>
<th>keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>로또826회당첨번호</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>맨유 웨스트햄</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>그것이 알고싶다</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>류현진</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>아는형님</td>
</tr>
<tr>
<td>5</td>
<td>6</td>
<td>그녀로 말할 것 같으면</td>
</tr>
<tr>
<td>6</td>
<td>7</td>
<td>플레이어</td>
</tr>
<tr>
<td>7</td>
<td>8</td>
<td>로또825회당첨번호</td>
</tr>
<tr>
<td>8</td>
<td>9</td>
<td>맨유</td>
</tr>
<tr>
<td>9</td>
<td>10</td>
<td>epl</td>
</tr>
<tr>
<td>10</td>
<td>11</td>
<td>토트넘</td>
</tr>
<tr>
<td>11</td>
<td>12</td>
<td>tvn온에어</td>
</tr>
<tr>
<td>12</td>
<td>13</td>
<td>제3의 매력</td>
</tr>
<tr>
<td>13</td>
<td>14</td>
<td>미스터 션샤인</td>
</tr>
<tr>
<td>14</td>
<td>15</td>
<td>첼시 리버풀</td>
</tr>
<tr>
<td>15</td>
<td>16</td>
<td>중국 샤먼 여행</td>
</tr>
<tr>
<td>16</td>
<td>17</td>
<td>박미선</td>
</tr>
<tr>
<td>17</td>
<td>18</td>
<td>하나뿐인 내편</td>
</tr>
<tr>
<td>18</td>
<td>19</td>
<td>아프리카tv</td>
</tr>
<tr>
<td>19</td>
<td>20</td>
<td>중국 샤먼</td>
</tr>
</tbody>
</table>
</div>
<h3 id="3-2-다음-검색어-순위"><a href="#3-2-다음-검색어-순위" class="headerlink" title="3.2 다음 검색어 순위"></a>3.2 다음 검색어 순위</h3><ul>
<li>다음 검색어 순위를 가져와서 네이버 검색어 순위와 중복되는 키워드만 출력하기</li>
<li><a href="http://daum.net" target="_blank" rel="noopener">http://daum.net</a></li>
</ul>
<h4 id="다음-실시간-검색어-순위-가져오기"><a href="#다음-실시간-검색어-순위-가져오기" class="headerlink" title="다음 실시간 검색어 순위 가져오기"></a>다음 실시간 검색어 순위 가져오기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">daum_top10</span><span class="params">()</span>:</span></span><br><span class="line">    df = pd.DataFrame(columns=[<span class="string">"rank"</span>,<span class="string">"keyword"</span>])</span><br><span class="line">    response = requests.get(<span class="string">"http://daum.net"</span>)</span><br><span class="line">    dom = BeautifulSoup(response.content, <span class="string">"html.parser"</span>)   </span><br><span class="line">    keywords = dom.select(<span class="string">"#mArticle &gt; div.cmain_tmp &gt; div.section_media &gt; div.hotissue_builtin &gt; div.realtime_part &gt; ol &gt; li"</span>)</span><br><span class="line">    print(len(keywords))</span><br><span class="line">    <span class="keyword">for</span> keyword <span class="keyword">in</span> keywords:</span><br><span class="line">        df.loc[len(df)] = &#123;</span><br><span class="line">            <span class="string">"rank"</span>:keyword.select_one(<span class="string">".ir_wa"</span>).text.replace(<span class="string">"위"</span>,<span class="string">""</span>),</span><br><span class="line">            <span class="string">"keyword"</span>:keyword.select_one(<span class="string">".link_issue"</span>).text,</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> df</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_daum = daum_top10()</span><br><span class="line">df_daum</span><br></pre></td></tr></table></figure>
<pre><code>10
</code></pre><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>rank</th>
<th>keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>중국 샤먼</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>양희은</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>826회 로또 당첨 번호</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>김민정</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>플레이어</td>
</tr>
<tr>
<td>5</td>
<td>6</td>
<td>경리</td>
</tr>
<tr>
<td>6</td>
<td>7</td>
<td>여자배구</td>
</tr>
<tr>
<td>7</td>
<td>8</td>
<td>일본 태풍</td>
</tr>
<tr>
<td>8</td>
<td>9</td>
<td>주이</td>
</tr>
<tr>
<td>9</td>
<td>10</td>
<td>송병준</td>
</tr>
</tbody>
</table>
</div>
<h4 id="네이버-실시간-검색어와-중복되는-키워드-추출하기"><a href="#네이버-실시간-검색어와-중복되는-키워드-추출하기" class="headerlink" title="네이버 실시간 검색어와 중복되는 키워드 추출하기"></a>네이버 실시간 검색어와 중복되는 키워드 추출하기</h4><ul>
<li>여러가지 방법이 있음</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df_naver = df</span><br><span class="line"></span><br><span class="line">result = [keyword <span class="keyword">for</span> keyword <span class="keyword">in</span> df_daum[<span class="string">"keyword"</span>] </span><br><span class="line">          <span class="keyword">if</span> keyword <span class="keyword">in</span> df_naver[<span class="string">"keyword"</span>].tolist()]</span><br><span class="line">result</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;중국 샤먼&#39;, &#39;플레이어&#39;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result = [keyword <span class="keyword">for</span> keyword <span class="keyword">in</span> df_daum[<span class="string">"keyword"</span>] </span><br><span class="line">          <span class="keyword">if</span> df_naver[<span class="string">"keyword"</span>].str.contains(keyword).any()]</span><br><span class="line">result</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;중국 샤먼&#39;, &#39;플레이어&#39;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(set(df_daum[<span class="string">"keyword"</span>]) &amp; set(df_naver[<span class="string">"keyword"</span>]))</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;중국 샤먼&#39;, &#39;플레이어&#39;]
</code></pre><h2 id="4-url-링크로-파일-다운로드-받는-방법"><a href="#4-url-링크로-파일-다운로드-받는-방법" class="headerlink" title="4. url 링크로 파일 다운로드 받는 방법"></a>4. url 링크로 파일 다운로드 받는 방법</h2><ul>
<li>이미지 파일이나 영상 파일을 다운로드 받고 싶으면 이 방법 사용</li>
<li>용량이 큰 파일을 받을 때는 chunk를 이용해서 파일을 쪼개서 다운로드 <ul>
<li>쪼개서 받지 않으면 에러가 나거나 하는 경우 처음부터 다시 받아야 함</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span><span class="params">(title, download_url)</span>:</span></span><br><span class="line">    response = requests.get(download_url, stream=<span class="keyword">True</span>)</span><br><span class="line">    size = <span class="number">0</span></span><br><span class="line">    <span class="keyword">with</span> open(title, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> response.iter_content(chunk_size=<span class="number">1024</span>): <span class="comment">#1024 byte 단위로 쪼개서 받음</span></span><br><span class="line">            <span class="keyword">if</span> chunk:</span><br><span class="line">                size += <span class="number">1024</span></span><br><span class="line">                f.write(chunk)</span><br><span class="line">    <span class="keyword">return</span> size</span><br></pre></td></tr></table></figure>
<p>Youtube 영상은 영상 링크에서 “www.”를 빼고 “ss”를 붙이면 다운로드 받을 수 있으므로, 여기서 다운로드 링크를 가져오기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title = <span class="string">"Tiffany_TeachYou.mp4"</span></span><br><span class="line">download_url = <span class="string">"https://bit.ly/2P1YDPT"</span></span><br><span class="line">size = download(title, download_url)</span><br><span class="line">round(size/<span class="number">1024</span>/<span class="number">1024</span>, <span class="number">2</span>)    <span class="comment"># byte 단위를 megabyte 단위로 만들어 줌</span></span><br></pre></td></tr></table></figure>
<pre><code>22.06
</code></pre><h4 id="결론-크롤링을-많이-연습해보자"><a href="#결론-크롤링을-많이-연습해보자" class="headerlink" title="결론: 크롤링을 많이 연습해보자!!"></a>결론: 크롤링을 많이 연습해보자!!</h4><h4 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h4><ul>
<li>패스트캠퍼스, ⟪데이터사이언스스쿨 8기⟫ 수업자료</li>
</ul>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/tags/crawling/page/0/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/tags/crawling/page/2/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/tags/crawling/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/tags/crawling/page/2/">2</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left is-sticky">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    <img class="image is-128x128 has-mb-6" src="/images/avatar.png" alt="우와팬더(Hyeshin Oh)">
                    
                    <p class="is-size-4 is-block">
                        우와팬더(Hyeshin Oh)
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        시작하는 데이터 사이언티스트
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Seoul, Korea</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        129
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        9
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        26
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="http://github.com/hyeshinoh">
                Follow</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="http://github.com/hyeshinoh">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Facebook" href="http://facebook.com/hyeshinoh">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Twitter" href="http://twitter.com/hyeshinoh">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Data-Analysis-공부/">
            <span class="level-start">
                <span class="level-item">Data Analysis 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">23</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Data-Analysis-공부/수학-공부/">
            <span class="level-start">
                <span class="level-item">수학 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">23</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Programming-공부/">
            <span class="level-start">
                <span class="level-item">Programming 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">30</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Programming-공부/Algorithm-공부/">
            <span class="level-start">
                <span class="level-item">Algorithm 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming-공부/Database-공부/">
            <span class="level-start">
                <span class="level-item">Database 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming-공부/Python-공부/">
            <span class="level-start">
                <span class="level-item">Python 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming-공부/Web-공부/">
            <span class="level-start">
                <span class="level-item">Web 공부</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">12</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/TIL-Today-I-Learned/">
            <span class="level-start">
                <span class="level-item">TIL(Today I Learned)</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">74</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/기타/">
            <span class="level-start">
                <span class="level-item">기타</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Database/" style="font-size: 13.33px;">Database</a> <a href="/tags/MySQL/" style="font-size: 12.22px;">MySQL</a> <a href="/tags/SQL/" style="font-size: 12.22px;">SQL</a> <a href="/tags/TIL-Today-I-Learned/" style="font-size: 20px;">TIL(Today I Learned)</a> <a href="/tags/algorithm/" style="font-size: 11.11px;">algorithm</a> <a href="/tags/crawling/" style="font-size: 14.44px;">crawling</a> <a href="/tags/data-analysis/" style="font-size: 17.78px;">data analysis</a> <a href="/tags/email/" style="font-size: 10px;">email</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 11.11px;">html</a> <a href="/tags/javascript/" style="font-size: 11.11px;">javascript</a> <a href="/tags/jupyter-notebook/" style="font-size: 10px;">jupyter notebook</a> <a href="/tags/math/" style="font-size: 17.78px;">math</a> <a href="/tags/mathjax/" style="font-size: 10px;">mathjax</a> <a href="/tags/programming/" style="font-size: 18.89px;">programming</a> <a href="/tags/python/" style="font-size: 16.67px;">python</a> <a href="/tags/selenium/" style="font-size: 12.22px;">selenium</a> <a href="/tags/web/" style="font-size: 15.56px;">web</a> <a href="/tags/web-crawling/" style="font-size: 14.44px;">web_crawling</a> <a href="/tags/미적분/" style="font-size: 10px;">미적분</a> <a href="/tags/선형대수/" style="font-size: 17.78px;">선형대수</a> <a href="/tags/알고리즘/" style="font-size: 11.11px;">알고리즘</a> <a href="/tags/알고리즘-문제/" style="font-size: 10px;">알고리즘_문제</a> <a href="/tags/웹크롤링/" style="font-size: 14.44px;">웹크롤링</a> <a href="/tags/확률통계/" style="font-size: 10px;">확률통계</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/01/06/2019-01-06-TIL/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2019-01-06-TIL">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-06T14:55:15.000Z">2019-01-06</time></div>
                    <a href="/2019/01/06/2019-01-06-TIL/" class="has-link-black-ter is-size-6">2019-01-06-TIL</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/TIL-Today-I-Learned/">TIL(Today I Learned)</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/03/2019-01-03-TIL/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2019-01-03-TIL">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-03T14:55:15.000Z">2019-01-03</time></div>
                    <a href="/2019/01/03/2019-01-03-TIL/" class="has-link-black-ter is-size-6">2019-01-03-TIL</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/TIL-Today-I-Learned/">TIL(Today I Learned)</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/12/02/math-lin_alg-022/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="&lt;선형대수&gt; 고윳값 분해 (2)">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-02T03:59:04.000Z">2018-12-02</time></div>
                    <a href="/2018/12/02/math-lin_alg-022/" class="has-link-black-ter is-size-6">&lt;선형대수&gt; 고윳값 분해 (2)</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/">Data Analysis 공부</a> / <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/수학-공부/">수학 공부</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/12/02/math-lin_alg-021/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="&lt;선형대수&gt; 고윳값 분해 (1)">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-02T02:26:04.000Z">2018-12-02</time></div>
                    <a href="/2018/12/02/math-lin_alg-021/" class="has-link-black-ter is-size-6">&lt;선형대수&gt; 고윳값 분해 (1)</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/">Data Analysis 공부</a> / <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/수학-공부/">수학 공부</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/22/math-lin_alg-020/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="&lt;선형대수&gt; 선형종속/선형독립 &amp; 좌표변환">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-22T09:26:04.000Z">2018-11-22</time></div>
                    <a href="/2018/11/22/math-lin_alg-020/" class="has-link-black-ter is-size-6">&lt;선형대수&gt; 선형종속/선형독립 &amp; 좌표변환</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/">Data Analysis 공부</a> / <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/수학-공부/">수학 공부</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">23</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">42</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/01/06/2019-01-06-TIL/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2019-01-06-TIL">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-06T14:55:15.000Z">2019-01-06</time></div>
                    <a href="/2019/01/06/2019-01-06-TIL/" class="has-link-black-ter is-size-6">2019-01-06-TIL</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/TIL-Today-I-Learned/">TIL(Today I Learned)</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/03/2019-01-03-TIL/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2019-01-03-TIL">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-03T14:55:15.000Z">2019-01-03</time></div>
                    <a href="/2019/01/03/2019-01-03-TIL/" class="has-link-black-ter is-size-6">2019-01-03-TIL</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/TIL-Today-I-Learned/">TIL(Today I Learned)</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/12/02/math-lin_alg-022/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="&lt;선형대수&gt; 고윳값 분해 (2)">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-02T03:59:04.000Z">2018-12-02</time></div>
                    <a href="/2018/12/02/math-lin_alg-022/" class="has-link-black-ter is-size-6">&lt;선형대수&gt; 고윳값 분해 (2)</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/">Data Analysis 공부</a> / <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/수학-공부/">수학 공부</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/12/02/math-lin_alg-021/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="&lt;선형대수&gt; 고윳값 분해 (1)">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-02T02:26:04.000Z">2018-12-02</time></div>
                    <a href="/2018/12/02/math-lin_alg-021/" class="has-link-black-ter is-size-6">&lt;선형대수&gt; 고윳값 분해 (1)</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/">Data Analysis 공부</a> / <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/수학-공부/">수학 공부</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/22/math-lin_alg-020/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="&lt;선형대수&gt; 선형종속/선형독립 &amp; 좌표변환">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-22T09:26:04.000Z">2018-11-22</time></div>
                    <a href="/2018/11/22/math-lin_alg-020/" class="has-link-black-ter is-size-6">&lt;선형대수&gt; 선형종속/선형독립 &amp; 좌표변환</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/">Data Analysis 공부</a> / <a class="has-link-grey -link" href="/categories/Data-Analysis-공부/수학-공부/">수학 공부</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">23</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">42</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="우와팬더의 블로그" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 우와팬더&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus">Icarus</a>
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="http://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css"><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
    
</body>
</html>